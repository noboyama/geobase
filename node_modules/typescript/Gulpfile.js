"use strict";
/// <reference path="scripts/types/ambient.d.ts" />
var cp = require("child_process");
var path = require("path");
var fs = require("fs");
var originalGulp = require("gulp");
var helpMaker = require("gulp-help");
var runSequence = require("run-sequence");
var concat = require("gulp-concat");
var clone = require("gulp-clone");
var newer = require("gulp-newer");
var tsc = require("gulp-typescript");
var insert = require("gulp-insert");
var sourcemaps = require("gulp-sourcemaps");
var del = require("del");
var mkdirP = require("mkdirp");
var minimist = require("minimist");
var browserify = require("browserify");
var through2 = require("through2");
var merge2 = require("merge2");
var intoStream = require("into-stream");
var os = require("os");
var fold = require("travis-fold");
var gulp = helpMaker(originalGulp);
var mochaParallel = require("./scripts/mocha-parallel.js");
var runTestsInParallel = mochaParallel.runTestsInParallel;
Error.stackTraceLimit = 1000;
var cmdLineOptions = minimist(process.argv.slice(2), {
    boolean: ["debug", "light", "colors", "lint", "soft"],
    string: ["browser", "tests", "host", "reporter", "stackTraceLimit"],
    alias: {
        d: "debug",
        t: "tests",
        test: "tests",
        r: "reporter",
        color: "colors",
        f: "files",
        file: "files"
    },
    "default": {
        soft: false,
        colors: process.env.colors || process.env.color || true,
        debug: process.env.debug || process.env.d,
        host: process.env.TYPESCRIPT_HOST || process.env.host || "node",
        browser: process.env.browser || process.env.b || "IE",
        tests: process.env.test || process.env.tests || process.env.t,
        light: process.env.light || false,
        reporter: process.env.reporter || process.env.r,
        lint: process.env.lint || true,
        files: process.env.f || process.env.file || process.env.files || ""
    }
});
function exec(cmd, args, complete, error) {
    if (complete === void 0) { complete = (function () { }); }
    if (error === void 0) { error = (function () { }); }
    console.log(cmd + " " + args.join(" "));
    // TODO (weswig): Update child_process types to add windowsVerbatimArguments to the type definition
    var subshellFlag = isWin ? "/c" : "-c";
    var command = isWin ? [possiblyQuote(cmd)].concat(args) : [cmd + " " + args.join(" ")];
    var ex = cp.spawn(isWin ? "cmd" : "/bin/sh", [subshellFlag].concat(command), { stdio: "inherit", windowsVerbatimArguments: true });
    ex.on("exit", function (code) { return code === 0 ? complete() : error(/*e*/ undefined, code); });
    ex.on("error", error);
}
function possiblyQuote(cmd) {
    return cmd.indexOf(" ") >= 0 ? "\"" + cmd + "\"" : cmd;
}
var useDebugMode = true;
var host = cmdLineOptions["host"];
// Constants
var compilerDirectory = "src/compiler/";
var harnessDirectory = "src/harness/";
var libraryDirectory = "src/lib/";
var scriptsDirectory = "scripts/";
var docDirectory = "doc/";
var builtDirectory = "built/";
var builtLocalDirectory = "built/local/";
var LKGDirectory = "lib/";
var copyright = "CopyrightNotice.txt";
var compilerFilename = "tsc.js";
var LKGCompiler = path.join(LKGDirectory, compilerFilename);
var builtLocalCompiler = path.join(builtLocalDirectory, compilerFilename);
var nodeModulesPathPrefix = path.resolve("./node_modules/.bin/");
var isWin = /^win/.test(process.platform);
var mocha = path.join(nodeModulesPathPrefix, "mocha") + (isWin ? ".cmd" : "");
var es2015LibrarySources = [
    "es2015.core.d.ts",
    "es2015.collection.d.ts",
    "es2015.generator.d.ts",
    "es2015.iterable.d.ts",
    "es2015.promise.d.ts",
    "es2015.proxy.d.ts",
    "es2015.reflect.d.ts",
    "es2015.symbol.d.ts",
    "es2015.symbol.wellknown.d.ts"
];
var es2015LibrarySourceMap = es2015LibrarySources.map(function (source) {
    return { target: "lib." + source, sources: ["header.d.ts", source] };
});
var es2016LibrarySource = ["es2016.array.include.d.ts"];
var es2016LibrarySourceMap = es2016LibrarySource.map(function (source) {
    return { target: "lib." + source, sources: ["header.d.ts", source] };
});
var es2017LibrarySource = [
    "es2017.object.d.ts",
    "es2017.sharedmemory.d.ts",
    "es2017.string.d.ts",
];
var es2017LibrarySourceMap = es2017LibrarySource.map(function (source) {
    return { target: "lib." + source, sources: ["header.d.ts", source] };
});
var hostsLibrarySources = ["dom.generated.d.ts", "webworker.importscripts.d.ts", "scripthost.d.ts"];
var librarySourceMap = [
    // Host library
    { target: "lib.dom.d.ts", sources: ["header.d.ts", "dom.generated.d.ts"] },
    { target: "lib.dom.iterable.d.ts", sources: ["header.d.ts", "dom.iterable.d.ts"] },
    { target: "lib.webworker.d.ts", sources: ["header.d.ts", "webworker.generated.d.ts"] },
    { target: "lib.scripthost.d.ts", sources: ["header.d.ts", "scripthost.d.ts"] },
    // JavaScript library
    { target: "lib.es5.d.ts", sources: ["header.d.ts", "es5.d.ts"] },
    { target: "lib.es2015.d.ts", sources: ["header.d.ts", "es2015.d.ts"] },
    { target: "lib.es2016.d.ts", sources: ["header.d.ts", "es2016.d.ts"] },
    { target: "lib.es2017.d.ts", sources: ["header.d.ts", "es2017.d.ts"] },
    // JavaScript + all host library
    { target: "lib.d.ts", sources: ["header.d.ts", "es5.d.ts"].concat(hostsLibrarySources) },
    { target: "lib.es6.d.ts", sources: ["header.d.ts", "es5.d.ts"].concat(es2015LibrarySources, hostsLibrarySources, "dom.iterable.d.ts") }
].concat(es2015LibrarySourceMap, es2016LibrarySourceMap, es2017LibrarySourceMap);
var libraryTargets = librarySourceMap.map(function (f) {
    return path.join(builtLocalDirectory, f.target);
});
var _loop_1 = function (i) {
    var entry = librarySourceMap[i];
    var target = libraryTargets[i];
    var sources = [copyright].concat(entry.sources.map(function (s) {
        return path.join(libraryDirectory, s);
    }));
    gulp.task(target, false, [], function () {
        return gulp.src(sources)
            .pipe(newer(target))
            .pipe(concat(target, { newLine: "\n\n" }))
            .pipe(gulp.dest("."));
    });
};
for (var i in libraryTargets) {
    _loop_1(i);
}
var configureNightlyJs = path.join(scriptsDirectory, "configureNightly.js");
var configureNightlyTs = path.join(scriptsDirectory, "configureNightly.ts");
var packageJson = "package.json";
var versionFile = path.join(compilerDirectory, "core.ts");
function needsUpdate(source, dest) {
    if (typeof source === "string" && typeof dest === "string") {
        if (fs.existsSync(dest)) {
            var outTime = fs.statSync(dest).mtime;
            var inTime = fs.statSync(source).mtime;
            if (+inTime <= +outTime) {
                return false;
            }
        }
    }
    else if (typeof source === "string" && typeof dest !== "string") {
        var inTime = fs.statSync(source).mtime;
        for (var _i = 0, dest_1 = dest; _i < dest_1.length; _i++) {
            var filepath = dest_1[_i];
            if (fs.existsSync(filepath)) {
                var outTime = fs.statSync(filepath).mtime;
                if (+inTime > +outTime) {
                    return true;
                }
            }
            else {
                return true;
            }
        }
        return false;
    }
    else if (typeof source !== "string" && typeof dest === "string") {
        if (fs.existsSync(dest)) {
            var outTime = fs.statSync(dest).mtime;
            for (var _a = 0, source_1 = source; _a < source_1.length; _a++) {
                var filepath = source_1[_a];
                if (fs.existsSync(filepath)) {
                    var inTime = fs.statSync(filepath).mtime;
                    if (+inTime > +outTime) {
                        return true;
                    }
                }
                else {
                    return true;
                }
            }
            return false;
        }
    }
    else if (typeof source !== "string" && typeof dest !== "string") {
        for (var i = 0; i < source.length; i++) {
            if (!dest[i]) {
                continue;
            }
            if (fs.existsSync(dest[i])) {
                var outTime = fs.statSync(dest[i]).mtime;
                var inTime = fs.statSync(source[i]).mtime;
                if (+inTime > +outTime) {
                    return true;
                }
            }
            else {
                return true;
            }
        }
        return false;
    }
    return true;
}
function getCompilerSettings(base, useBuiltCompiler) {
    var copy = {};
    copy.noEmitOnError = true;
    copy.noImplicitAny = true;
    copy.noImplicitThis = true;
    copy.pretty = true;
    copy.types = [];
    for (var key in base) {
        copy[key] = base[key];
    }
    if (!useDebugMode) {
        if (copy.removeComments === undefined)
            copy.removeComments = true;
        copy.newLine = "lf";
    }
    else {
        copy.preserveConstEnums = true;
    }
    if (useBuiltCompiler === true) {
        copy.typescript = require("./built/local/typescript.js");
    }
    else if (useBuiltCompiler === false) {
        copy.typescript = require("./lib/typescript.js");
    }
    return copy;
}
gulp.task(configureNightlyJs, false, [], function () {
    var settings = {
        declaration: false,
        removeComments: true,
        noResolve: false,
        stripInternal: false
    };
    return gulp.src(configureNightlyTs)
        .pipe(sourcemaps.init())
        .pipe(tsc(settings))
        .pipe(sourcemaps.write(path.dirname(configureNightlyJs)))
        .pipe(gulp.dest(path.dirname(configureNightlyJs)));
});
// Nightly management tasks
gulp.task("configure-nightly", "Runs scripts/configureNightly.ts to prepare a build for nightly publishing", [configureNightlyJs], function (done) {
    exec(host, [configureNightlyJs, packageJson, versionFile], done, done);
});
gulp.task("publish-nightly", "Runs `npm publish --tag next` to create a new nightly build on npm", ["LKG"], function () {
    return runSequence("clean", "useDebugMode", "runtests", function (done) {
        exec("npm", ["publish", "--tag", "next"], done, done);
    });
});
var importDefinitelyTypedTestsDirectory = path.join(scriptsDirectory, "importDefinitelyTypedTests");
var importDefinitelyTypedTestsJs = path.join(importDefinitelyTypedTestsDirectory, "importDefinitelyTypedTests.js");
var importDefinitelyTypedTestsTs = path.join(importDefinitelyTypedTestsDirectory, "importDefinitelyTypedTests.ts");
gulp.task(importDefinitelyTypedTestsJs, false, [], function () {
    var settings = getCompilerSettings({
        declaration: false,
        removeComments: true,
        noResolve: false,
        stripInternal: false,
        outFile: importDefinitelyTypedTestsJs
    }, /*useBuiltCompiler*/ false);
    return gulp.src(importDefinitelyTypedTestsTs)
        .pipe(sourcemaps.init())
        .pipe(tsc(settings))
        .pipe(sourcemaps.write("."))
        .pipe(gulp.dest("."));
});
gulp.task("importDefinitelyTypedTests", "Runs scripts/importDefinitelyTypedTests/importDefinitelyTypedTests.ts to copy DT's tests to the TS-internal RWC tests", [importDefinitelyTypedTestsJs], function (done) {
    exec(host, [importDefinitelyTypedTestsJs, "./", "../DefinitelyTyped"], done, done);
});
gulp.task("lib", "Builds the library targets", libraryTargets);
// Generate diagnostics
var processDiagnosticMessagesJs = path.join(scriptsDirectory, "processDiagnosticMessages.js");
var processDiagnosticMessagesTs = path.join(scriptsDirectory, "processDiagnosticMessages.ts");
var diagnosticMessagesJson = path.join(compilerDirectory, "diagnosticMessages.json");
var diagnosticInfoMapTs = path.join(compilerDirectory, "diagnosticInformationMap.generated.ts");
var generatedDiagnosticMessagesJSON = path.join(compilerDirectory, "diagnosticMessages.generated.json");
var builtGeneratedDiagnosticMessagesJSON = path.join(builtLocalDirectory, "diagnosticMessages.generated.json");
// processDiagnosticMessages script
gulp.task(processDiagnosticMessagesJs, false, [], function () {
    var settings = getCompilerSettings({
        declaration: false,
        removeComments: true,
        noResolve: false,
        stripInternal: false,
        outFile: processDiagnosticMessagesJs
    }, /*useBuiltCompiler*/ false);
    return gulp.src(processDiagnosticMessagesTs)
        .pipe(newer(processDiagnosticMessagesJs))
        .pipe(sourcemaps.init())
        .pipe(tsc(settings))
        .pipe(sourcemaps.write("."))
        .pipe(gulp.dest("."));
});
// The generated diagnostics map; built for the compiler and for the "generate-diagnostics" task
gulp.task(diagnosticInfoMapTs, [processDiagnosticMessagesJs], function (done) {
    if (needsUpdate(diagnosticMessagesJson, [generatedDiagnosticMessagesJSON, diagnosticInfoMapTs])) {
        exec(host, [processDiagnosticMessagesJs, diagnosticMessagesJson], done, done);
    }
    else {
        done();
    }
});
gulp.task(builtGeneratedDiagnosticMessagesJSON, [diagnosticInfoMapTs], function (done) {
    if (fs.existsSync(builtLocalDirectory) && needsUpdate(generatedDiagnosticMessagesJSON, builtGeneratedDiagnosticMessagesJSON)) {
        fs.writeFileSync(builtGeneratedDiagnosticMessagesJSON, fs.readFileSync(generatedDiagnosticMessagesJSON));
    }
    done();
});
gulp.task("generate-diagnostics", "Generates a diagnostic file in TypeScript based on an input JSON file", [diagnosticInfoMapTs]);
var servicesFile = path.join(builtLocalDirectory, "typescriptServices.js");
var standaloneDefinitionsFile = path.join(builtLocalDirectory, "typescriptServices.d.ts");
var nodePackageFile = path.join(builtLocalDirectory, "typescript.js");
var nodeDefinitionsFile = path.join(builtLocalDirectory, "typescript.d.ts");
var nodeStandaloneDefinitionsFile = path.join(builtLocalDirectory, "typescript_standalone.d.ts");
var copyrightContent;
function prependCopyright(outputCopyright) {
    if (outputCopyright === void 0) { outputCopyright = !useDebugMode; }
    return insert.prepend(outputCopyright ? (copyrightContent || (copyrightContent = fs.readFileSync(copyright).toString())) : "");
}
gulp.task(builtLocalCompiler, false, [servicesFile], function () {
    var localCompilerProject = tsc.createProject("src/compiler/tsconfig.json", getCompilerSettings({}, /*useBuiltCompiler*/ true));
    return localCompilerProject.src()
        .pipe(newer(builtLocalCompiler))
        .pipe(sourcemaps.init())
        .pipe(localCompilerProject())
        .pipe(prependCopyright())
        .pipe(sourcemaps.write("."))
        .pipe(gulp.dest("."));
});
gulp.task(servicesFile, false, ["lib", "generate-diagnostics"], function () {
    var servicesProject = tsc.createProject("src/services/tsconfig.json", getCompilerSettings({ removeComments: false }, /*useBuiltCompiler*/ false));
    var _a = servicesProject.src()
        .pipe(newer(servicesFile))
        .pipe(sourcemaps.init())
        .pipe(servicesProject()), js = _a.js, dts = _a.dts;
    var completedJs = js.pipe(prependCopyright())
        .pipe(sourcemaps.write("."));
    var completedDts = dts.pipe(prependCopyright(/*outputCopyright*/ true))
        .pipe(insert.transform(function (contents, file) {
        file.path = standaloneDefinitionsFile;
        return contents.replace(/^(\s*)(export )?const enum (\S+) {(\s*)$/gm, "$1$2enum $3 {$4");
    }));
    return merge2([
        completedJs,
        completedJs.pipe(clone())
            .pipe(insert.transform(function (content, file) { return (file.path = nodePackageFile, content); })),
        completedDts,
        completedDts.pipe(clone())
            .pipe(insert.transform(function (content, file) {
            file.path = nodeDefinitionsFile;
            return content + "\r\nexport = ts;";
        }))
            .pipe(gulp.dest(".")),
        completedDts.pipe(clone())
            .pipe(insert.transform(function (content, file) {
            file.path = nodeStandaloneDefinitionsFile;
            return content.replace(/declare (namespace|module) ts/g, 'declare module "typescript"');
        }))
    ]).pipe(gulp.dest("."));
});
// cancellationToken.js
var cancellationTokenJs = path.join(builtLocalDirectory, "cancellationToken.js");
gulp.task(cancellationTokenJs, false, [servicesFile], function () {
    var cancellationTokenProject = tsc.createProject("src/server/cancellationToken/tsconfig.json", getCompilerSettings({}, /*useBuiltCompiler*/ true));
    return cancellationTokenProject.src()
        .pipe(newer(cancellationTokenJs))
        .pipe(sourcemaps.init())
        .pipe(cancellationTokenProject())
        .pipe(prependCopyright())
        .pipe(sourcemaps.write("."))
        .pipe(gulp.dest(builtLocalDirectory));
});
// typingsInstallerFile.js
var typingsInstallerJs = path.join(builtLocalDirectory, "typingsInstaller.js");
gulp.task(typingsInstallerJs, false, [servicesFile], function () {
    var cancellationTokenProject = tsc.createProject("src/server/typingsInstaller/tsconfig.json", getCompilerSettings({}, /*useBuiltCompiler*/ true));
    return cancellationTokenProject.src()
        .pipe(newer(typingsInstallerJs))
        .pipe(sourcemaps.init())
        .pipe(cancellationTokenProject())
        .pipe(prependCopyright())
        .pipe(sourcemaps.write("."))
        .pipe(gulp.dest("."));
});
var serverFile = path.join(builtLocalDirectory, "tsserver.js");
gulp.task(serverFile, false, [servicesFile, typingsInstallerJs, cancellationTokenJs], function () {
    var serverProject = tsc.createProject("src/server/tsconfig.json", getCompilerSettings({}, /*useBuiltCompiler*/ true));
    return serverProject.src()
        .pipe(newer(serverFile))
        .pipe(sourcemaps.init())
        .pipe(serverProject())
        .pipe(prependCopyright())
        .pipe(sourcemaps.write("."))
        .pipe(gulp.dest("."));
});
var tsserverLibraryFile = path.join(builtLocalDirectory, "tsserverlibrary.js");
var tsserverLibraryDefinitionFile = path.join(builtLocalDirectory, "tsserverlibrary.d.ts");
gulp.task(tsserverLibraryFile, false, [servicesFile], function (done) {
    var serverLibraryProject = tsc.createProject("src/server/tsconfig.library.json", getCompilerSettings({}, /*useBuiltCompiler*/ true));
    var _a = serverLibraryProject.src()
        .pipe(sourcemaps.init())
        .pipe(newer(tsserverLibraryFile))
        .pipe(serverLibraryProject()), js = _a.js, dts = _a.dts;
    return merge2([
        js.pipe(prependCopyright())
            .pipe(sourcemaps.write("."))
            .pipe(gulp.dest(".")),
        dts.pipe(prependCopyright())
            .pipe(gulp.dest("."))
    ]);
});
gulp.task("lssl", "Builds language service server library", [tsserverLibraryFile]);
gulp.task("local", "Builds the full compiler and services", [builtLocalCompiler, servicesFile, serverFile, builtGeneratedDiagnosticMessagesJSON, tsserverLibraryFile]);
gulp.task("tsc", "Builds only the compiler", [builtLocalCompiler]);
// Generate Markdown spec
var word2mdJs = path.join(scriptsDirectory, "word2md.js");
var word2mdTs = path.join(scriptsDirectory, "word2md.ts");
var specWord = path.join(docDirectory, "TypeScript Language Specification.docx");
var specMd = path.join(docDirectory, "spec.md");
gulp.task(word2mdJs, false, [], function () {
    var settings = getCompilerSettings({
        outFile: word2mdJs
    }, /*useBuiltCompiler*/ false);
    return gulp.src(word2mdTs)
        .pipe(newer(word2mdJs))
        .pipe(sourcemaps.init())
        .pipe(tsc(settings))
        .pipe(sourcemaps.write("."))
        .pipe(gulp.dest("."));
});
gulp.task(specMd, false, [word2mdJs], function (done) {
    var specWordFullPath = path.resolve(specWord);
    var specMDFullPath = path.resolve(specMd);
    var cmd = "cscript //nologo " + word2mdJs + " \"" + specWordFullPath + "\" " + "\"" + specMDFullPath + "\"";
    console.log(cmd);
    cp.exec(cmd, function () {
        done();
    });
});
gulp.task("generate-spec", "Generates a Markdown version of the Language Specification", [specMd]);
gulp.task("clean", "Cleans the compiler output, declare files, and tests", [], function () {
    return del([builtDirectory]);
});
gulp.task("useDebugMode", false, [], function (done) { useDebugMode = true; done(); });
gulp.task("dontUseDebugMode", false, [], function (done) { useDebugMode = false; done(); });
gulp.task("VerifyLKG", false, [], function () {
    var expectedFiles = [builtLocalCompiler, servicesFile, serverFile, nodePackageFile, nodeDefinitionsFile, standaloneDefinitionsFile, tsserverLibraryFile, tsserverLibraryDefinitionFile, typingsInstallerJs, cancellationTokenJs].concat(libraryTargets);
    var missingFiles = expectedFiles.filter(function (f) {
        return !fs.existsSync(f);
    });
    if (missingFiles.length > 0) {
        throw new Error("Cannot replace the LKG unless all built targets are present in directory " + builtLocalDirectory +
            ". The following files are missing:\n" + missingFiles.join("\n"));
    }
    // Copy all the targets into the LKG directory
    return gulp.src(expectedFiles).pipe(gulp.dest(LKGDirectory));
});
gulp.task("LKGInternal", false, ["lib", "local"]);
gulp.task("LKG", "Makes a new LKG out of the built js files", ["clean", "dontUseDebugMode"], function () {
    return runSequence("LKGInternal", "VerifyLKG");
});
// Task to build the tests infrastructure using the built compiler
var run = path.join(builtLocalDirectory, "run.js");
gulp.task(run, false, [servicesFile], function () {
    var testProject = tsc.createProject("src/harness/tsconfig.json", getCompilerSettings({}, /*useBuiltCompiler*/ true));
    return testProject.src()
        .pipe(newer(run))
        .pipe(sourcemaps.init())
        .pipe(testProject())
        .pipe(sourcemaps.write(".", { includeContent: false, sourceRoot: "../../" }))
        .pipe(gulp.dest("."));
});
var internalTests = "internal/";
var localBaseline = "tests/baselines/local/";
var refBaseline = "tests/baselines/reference/";
var localRwcBaseline = path.join(internalTests, "baselines/rwc/local");
var refRwcBaseline = path.join(internalTests, "baselines/rwc/reference");
var localTest262Baseline = path.join(internalTests, "baselines/test262/local");
gulp.task("tests", "Builds the test infrastructure using the built compiler", [run]);
gulp.task("tests-debug", "Builds the test sources and automation in debug mode", function () {
    return runSequence("useDebugMode", "tests");
});
function deleteTemporaryProjectOutput() {
    return del(path.join(localBaseline, "projectOutput/"));
}
var savedNodeEnv;
function setNodeEnvToDevelopment() {
    savedNodeEnv = process.env.NODE_ENV;
    process.env.NODE_ENV = "development";
}
function restoreSavedNodeEnv() {
    process.env.NODE_ENV = savedNodeEnv;
}
var testTimeout = 40000;
function runConsoleTests(defaultReporter, runInParallel, done) {
    var lintFlag = cmdLineOptions["lint"];
    cleanTestDirs(function (err) {
        if (err) {
            console.error(err);
            failWithStatus(err, 1);
        }
        var debug = cmdLineOptions["debug"];
        var tests = cmdLineOptions["tests"];
        var light = cmdLineOptions["light"];
        var stackTraceLimit = cmdLineOptions["stackTraceLimit"];
        var testConfigFile = "test.config";
        if (fs.existsSync(testConfigFile)) {
            fs.unlinkSync(testConfigFile);
        }
        var workerCount, taskConfigsFolder;
        if (runInParallel) {
            // generate name to store task configuration files
            var prefix = os.tmpdir() + "/ts-tests";
            var i = 1;
            do {
                taskConfigsFolder = prefix + i;
                i++;
            } while (fs.existsSync(taskConfigsFolder));
            fs.mkdirSync(taskConfigsFolder);
            workerCount = process.env.workerCount || os.cpus().length;
        }
        if (tests || light || taskConfigsFolder) {
            writeTestConfigFile(tests, light, taskConfigsFolder, workerCount, stackTraceLimit);
        }
        if (tests && tests.toLocaleLowerCase() === "rwc") {
            testTimeout = 400000;
        }
        var colors = cmdLineOptions["colors"];
        var reporter = cmdLineOptions["reporter"] || defaultReporter;
        // timeout normally isn"t necessary but Travis-CI has been timing out on compiler baselines occasionally
        // default timeout is 2sec which really should be enough, but maybe we just need a small amount longer
        if (!runInParallel) {
            var args = [];
            if (debug) {
                args.push("--debug-brk");
            }
            args.push("-R", reporter);
            if (tests) {
                args.push("-g", "\"" + tests + "\"");
            }
            if (colors) {
                args.push("--colors");
            }
            else {
                args.push("--no-colors");
            }
            args.push("-t", testTimeout);
            args.push(run);
            setNodeEnvToDevelopment();
            exec(mocha, args, lintThenFinish, function (e, status) {
                finish(e, status);
            });
        }
        else {
            // run task to load all tests and partition them between workers
            var args = [];
            args.push("-R", "min");
            if (colors) {
                args.push("--colors");
            }
            else {
                args.push("--no-colors");
            }
            args.push(run);
            setNodeEnvToDevelopment();
            runTestsInParallel(taskConfigsFolder, run, { testTimeout: testTimeout, noColors: colors === " --no-colors " }, function (err) {
                // last worker clean everything and runs linter in case if there were no errors
                del(taskConfigsFolder).then(function () {
                    if (!err) {
                        lintThenFinish();
                    }
                    else {
                        finish(err);
                    }
                });
            });
        }
    });
    function failWithStatus(err, status) {
        if (err) {
            console.log(err);
        }
        done(err || status);
        process.exit(status);
    }
    function lintThenFinish() {
        if (lintFlag) {
            runSequence("lint", finish);
        }
        else {
            finish();
        }
    }
    function finish(error, errorStatus) {
        restoreSavedNodeEnv();
        deleteTemporaryProjectOutput().then(function () {
            if (error !== undefined || errorStatus !== undefined) {
                failWithStatus(error, errorStatus);
            }
            else {
                done();
            }
        });
    }
}
gulp.task("runtests-parallel", "Runs all the tests in parallel using the built run.js file. Optional arguments are: --t[ests]=category1|category2|... --d[ebug]=true.", ["build-rules", "tests"], function (done) {
    runConsoleTests("min", /*runInParallel*/ true, done);
});
gulp.task("runtests", "Runs the tests using the built run.js file. Optional arguments are: --t[ests]=regex --r[eporter]=[list|spec|json|<more>] --d[ebug]=true --color[s]=false --lint=true.", ["build-rules", "tests"], function (done) {
    runConsoleTests("mocha-fivemat-progress-reporter", /*runInParallel*/ false, done);
});
var nodeServerOutFile = "tests/webTestServer.js";
var nodeServerInFile = "tests/webTestServer.ts";
gulp.task(nodeServerOutFile, false, [servicesFile], function () {
    var settings = getCompilerSettings({ module: "commonjs" }, /*useBuiltCompiler*/ true);
    return gulp.src(nodeServerInFile)
        .pipe(newer(nodeServerOutFile))
        .pipe(sourcemaps.init())
        .pipe(tsc(settings))
        .pipe(sourcemaps.write("."))
        .pipe(gulp.dest(path.dirname(nodeServerOutFile)));
});
var convertMap = require("convert-source-map");
var sorcery = require("sorcery");
gulp.task("browserify", "Runs browserify on run.js to produce a file suitable for running tests in the browser", [servicesFile], function (done) {
    var testProject = tsc.createProject("src/harness/tsconfig.json", getCompilerSettings({ outFile: "../../built/local/bundle.js" }, /*useBuiltCompiler*/ true));
    return testProject.src()
        .pipe(newer("built/local/bundle.js"))
        .pipe(sourcemaps.init())
        .pipe(testProject())
        .pipe(through2.obj(function (file, enc, next) {
        var originalMap = file.sourceMap;
        var prebundledContent = file.contents.toString();
        // Make paths absolute to help sorcery deal with all the terrible paths being thrown around
        originalMap.sources = originalMap.sources.map(function (s) { return path.resolve(s); });
        // intoStream (below) makes browserify think the input file is named this, so this is what it puts in the sourcemap
        originalMap.file = "built/local/_stream_0.js";
        browserify(intoStream(file.contents), { debug: true })
            .bundle(function (err, res) {
            // assumes file.contents is a Buffer
            var maps = JSON.parse(convertMap.fromSource(res.toString(), /*largeSource*/ true).toJSON());
            delete maps.sourceRoot;
            maps.sources = maps.sources.map(function (s) { return path.resolve(s === "_stream_0.js" ? "built/local/_stream_0.js" : s); });
            // Strip browserify's inline comments away (could probably just let sorcery do this, but then we couldn't fix the paths)
            file.contents = new Buffer(convertMap.removeComments(res.toString()));
            var chain = sorcery.loadSync("built/local/bundle.js", {
                content: {
                    "built/local/_stream_0.js": prebundledContent,
                    "built/local/bundle.js": file.contents.toString()
                },
                sourcemaps: {
                    "built/local/_stream_0.js": originalMap,
                    "built/local/bundle.js": maps,
                    "node_modules/source-map-support/source-map-support.js": undefined
                }
            });
            var finalMap = chain.apply();
            file.sourceMap = finalMap;
            next(undefined, file);
        });
    }))
        .pipe(sourcemaps.write(".", { includeContent: false }))
        .pipe(gulp.dest("."));
});
function cleanTestDirs(done) {
    // Clean the local baselines & Rwc baselines directories
    del([
        localBaseline,
        localRwcBaseline,
    ]).then(function () {
        mkdirP(localRwcBaseline, function (err) {
            if (err)
                done(err);
            mkdirP(localTest262Baseline, function () {
                if (err)
                    done(err);
                mkdirP(localBaseline, function (err) { return done(err); });
            });
        });
    });
}
// used to pass data from jake command line directly to run.js
function writeTestConfigFile(tests, light, taskConfigsFolder, workerCount, stackTraceLimit) {
    var testConfigContents = JSON.stringify({ test: tests ? [tests] : undefined, light: light, workerCount: workerCount, stackTraceLimit: stackTraceLimit, taskConfigsFolder: taskConfigsFolder });
    console.log("Running tests with config: " + testConfigContents);
    fs.writeFileSync("test.config", testConfigContents);
}
gulp.task("runtests-browser", "Runs the tests using the built run.js file like 'gulp runtests'. Syntax is gulp runtests-browser. Additional optional parameters --tests=[regex], --browser=[chrome|IE]", ["browserify", nodeServerOutFile], function (done) {
    cleanTestDirs(function (err) {
        if (err) {
            console.error(err);
            done(err);
            process.exit(1);
        }
        host = "node";
        var tests = cmdLineOptions["tests"];
        var light = cmdLineOptions["light"];
        var testConfigFile = "test.config";
        if (fs.existsSync(testConfigFile)) {
            fs.unlinkSync(testConfigFile);
        }
        if (tests || light) {
            writeTestConfigFile(tests, light);
        }
        var args = [nodeServerOutFile];
        if (cmdLineOptions["browser"]) {
            args.push(cmdLineOptions["browser"]);
        }
        if (tests) {
            args.push(JSON.stringify(tests));
        }
        exec(host, args, done, done);
    });
});
gulp.task("generate-code-coverage", "Generates code coverage data via istanbul", ["tests"], function (done) {
    exec("istanbul", ["cover", "node_modules/mocha/bin/_mocha", "--", "-R", "min", "-t", testTimeout.toString(), run], done, done);
});
function getDiffTool() {
    var program = process.env["DIFF"];
    if (!program) {
        console.error("Add the 'DIFF' environment variable to the path of the program you want to use.");
        process.exit(1);
    }
    return program;
}
gulp.task("diff", "Diffs the compiler baselines using the diff tool specified by the 'DIFF' environment variable", function (done) {
    exec(getDiffTool(), [refBaseline, localBaseline], done, done);
});
gulp.task("diff-rwc", "Diffs the RWC baselines using the diff tool specified by the 'DIFF' environment variable", function (done) {
    exec(getDiffTool(), [refRwcBaseline, localRwcBaseline], done, done);
});
gulp.task("baseline-accept", "Makes the most recent test results the new baseline, overwriting the old baseline", function () {
    return baselineAccept("");
});
function baselineAccept(subfolder) {
    if (subfolder === void 0) { subfolder = ""; }
    return merge2(baselineCopy(subfolder), baselineDelete(subfolder));
}
function baselineCopy(subfolder) {
    if (subfolder === void 0) { subfolder = ""; }
    return gulp.src(["tests/baselines/local/" + subfolder + "/**", "!tests/baselines/local/" + subfolder + "/**/*.delete"])
        .pipe(gulp.dest(refBaseline));
}
function baselineDelete(subfolder) {
    if (subfolder === void 0) { subfolder = ""; }
    return gulp.src(["tests/baselines/local/**/*.delete"])
        .pipe(insert.transform(function (content, fileObj) {
        var target = path.join(refBaseline, fileObj.relative.substr(0, fileObj.relative.length - ".delete".length));
        del.sync(target);
        del.sync(fileObj.path);
        return "";
    }));
}
gulp.task("baseline-accept-rwc", "Makes the most recent rwc test results the new baseline, overwriting the old baseline", function () {
    return baselineAccept("rwc");
});
gulp.task("baseline-accept-test262", "Makes the most recent test262 test results the new baseline, overwriting the old baseline", function () {
    return baselineAccept("test262");
});
// Webhost
var webhostPath = "tests/webhost/webtsc.ts";
var webhostJsPath = "tests/webhost/webtsc.js";
gulp.task(webhostJsPath, false, [servicesFile], function () {
    var settings = getCompilerSettings({
        outFile: webhostJsPath
    }, /*useBuiltCompiler*/ true);
    return gulp.src(webhostPath)
        .pipe(newer(webhostJsPath))
        .pipe(sourcemaps.init())
        .pipe(tsc(settings))
        .pipe(sourcemaps.write("."))
        .pipe(gulp.dest(path.dirname(webhostJsPath)));
});
gulp.task("webhost", "Builds the tsc web host", [webhostJsPath], function () {
    return gulp.src(path.join(builtLocalDirectory, "lib.d.ts")).pipe(gulp.dest("tests/webhost/"));
});
// Perf compiler
var perftscPath = "tests/perftsc.ts";
var perftscJsPath = "built/local/perftsc.js";
gulp.task(perftscJsPath, false, [servicesFile], function () {
    var settings = getCompilerSettings({
        outFile: perftscJsPath
    }, /*useBuiltCompiler*/ true);
    return gulp.src(perftscPath)
        .pipe(newer(perftscJsPath))
        .pipe(sourcemaps.init())
        .pipe(tsc(settings))
        .pipe(sourcemaps.write("."))
        .pipe(gulp.dest("."));
});
gulp.task("perftsc", "Builds augmented version of the compiler for perf tests", [perftscJsPath]);
// Instrumented compiler
var loggedIOpath = path.join(harnessDirectory, "loggedIO.ts");
var loggedIOJsPath = path.join(builtLocalDirectory, "loggedIO.js");
gulp.task(loggedIOJsPath, false, [], function (done) {
    var temp = path.join(builtLocalDirectory, "temp");
    mkdirP(temp, function (err) {
        if (err) {
            console.error(err);
            done(err);
            process.exit(1);
        }
        ;
        exec(host, [LKGCompiler, "--types --outdir", temp, loggedIOpath], function () {
            fs.renameSync(path.join(temp, "/harness/loggedIO.js"), loggedIOJsPath);
            del(temp).then(function () { return done(); }, done);
        }, done);
    });
});
var instrumenterPath = path.join(harnessDirectory, "instrumenter.ts");
var instrumenterJsPath = path.join(builtLocalDirectory, "instrumenter.js");
gulp.task(instrumenterJsPath, false, [servicesFile], function () {
    var settings = getCompilerSettings({
        outFile: instrumenterJsPath
    }, /*useBuiltCompiler*/ true);
    return gulp.src(instrumenterPath)
        .pipe(newer(instrumenterJsPath))
        .pipe(sourcemaps.init())
        .pipe(tsc(settings))
        .pipe(sourcemaps.write("."))
        .pipe(gulp.dest("."));
});
gulp.task("tsc-instrumented", "Builds an instrumented tsc.js", ["local", loggedIOJsPath, instrumenterJsPath, servicesFile], function (done) {
    exec(host, [instrumenterJsPath, "record", "iocapture", builtLocalCompiler], done, done);
});
gulp.task("update-sublime", "Updates the sublime plugin's tsserver", ["local", serverFile], function () {
    return gulp.src([serverFile, serverFile + ".map"]).pipe(gulp.dest("../TypeScript-Sublime-Plugin/tsserver/"));
});
gulp.task("build-rules", "Compiles tslint rules to js", function () {
    var settings = getCompilerSettings({ module: "commonjs" }, /*useBuiltCompiler*/ false);
    var dest = path.join(builtLocalDirectory, "tslint");
    return gulp.src("scripts/tslint/**/*.ts")
        .pipe(newer({
        dest: dest,
        ext: ".js"
    }))
        .pipe(sourcemaps.init())
        .pipe(tsc(settings))
        .pipe(sourcemaps.write("."))
        .pipe(gulp.dest(dest));
});
var lintTargets = [
    "Gulpfile.ts",
    "src/compiler/**/*.ts",
    "src/harness/**/*.ts",
    "!src/harness/unittests/services/formatting/**/*.ts",
    "src/server/**/*.ts",
    "scripts/tslint/**/*.ts",
    "src/services/**/*.ts",
    "tests/*.ts", "tests/webhost/*.ts" // Note: does *not* descend recursively
];
function sendNextFile(files, child, callback, failures) {
    var file = files.pop();
    if (file) {
        console.log("Linting '" + file.path + "'.");
        child.send({ kind: "file", name: file.path });
    }
    else {
        child.send({ kind: "close" });
        callback(failures);
    }
}
function spawnLintWorker(files, callback) {
    var child = cp.fork("./scripts/parallel-lint");
    var failures = 0;
    child.on("message", function (data) {
        switch (data.kind) {
            case "result":
                if (data.failures > 0) {
                    failures += data.failures;
                    console.log(data.output);
                }
                sendNextFile(files, child, callback, failures);
                break;
            case "error":
                console.error(data.error);
                failures++;
                sendNextFile(files, child, callback, failures);
                break;
        }
    });
    sendNextFile(files, child, callback, failures);
}
gulp.task("lint", "Runs tslint on the compiler sources. Optional arguments are: --f[iles]=regex", ["build-rules"], function () {
    var fileMatcher = RegExp(cmdLineOptions["files"]);
    if (fold.isTravis())
        console.log(fold.start("lint"));
    var files = [];
    return gulp.src(lintTargets, { read: false })
        .pipe(through2.obj(function (chunk, enc, cb) {
        files.push(chunk);
        cb();
    }, function (cb) {
        files = files.filter(function (file) { return fileMatcher.test(file.path); }).sort(function (filea, fileb) { return filea.stat.size - fileb.stat.size; });
        var workerCount = (process.env.workerCount && +process.env.workerCount) || os.cpus().length;
        for (var i = 0; i < workerCount; i++) {
            spawnLintWorker(files, finished);
        }
        var completed = 0;
        var failures = 0;
        function finished(fails) {
            completed++;
            failures += fails;
            if (completed === workerCount) {
                if (fold.isTravis())
                    console.log(fold.end("lint"));
                if (failures > 0) {
                    throw new Error("Linter errors: " + failures);
                }
                else {
                    cb();
                }
            }
        }
    }));
});
gulp.task("default", "Runs 'local'", ["local"]);
gulp.task("watch", "Watches the src/ directory for changes and executes runtests-parallel.", [], function () {
    gulp.watch("src/**/*.*", ["runtests-parallel"]);
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy90eXBlc2NyaXB0L0d1bHBmaWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxtREFBbUQ7QUFDbkQsa0NBQW9DO0FBQ3BDLDJCQUE2QjtBQUM3Qix1QkFBeUI7QUFDekIsbUNBQXNDO0FBQ3RDLHFDQUF3QztBQUN4QywwQ0FBNkM7QUFDN0Msb0NBQXVDO0FBQ3ZDLGtDQUFxQztBQUNyQyxrQ0FBcUM7QUFDckMscUNBQXdDO0FBVXhDLG9DQUFzQztBQUN0Qyw0Q0FBOEM7QUFNOUMseUJBQTRCO0FBQzVCLCtCQUFrQztBQUNsQyxtQ0FBc0M7QUFDdEMsdUNBQTBDO0FBQzFDLG1DQUFzQztBQUN0QywrQkFBa0M7QUFDbEMsd0NBQTJDO0FBQzNDLHVCQUF5QjtBQUN6QixrQ0FBcUM7QUFDckMsSUFBTSxJQUFJLEdBQUcsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQ3JDLElBQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO0FBQ3RELElBQUEscURBQWtCLENBQWtCO0FBRTNDLEtBQUssQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO0FBRTdCLElBQU0sY0FBYyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRTtJQUNuRCxPQUFPLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsTUFBTSxDQUFDO0lBQ3JELE1BQU0sRUFBRSxDQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxpQkFBaUIsQ0FBQztJQUNuRSxLQUFLLEVBQUU7UUFDSCxDQUFDLEVBQUUsT0FBTztRQUNWLENBQUMsRUFBRSxPQUFPO1FBQ1YsSUFBSSxFQUFFLE9BQU87UUFDYixDQUFDLEVBQUUsVUFBVTtRQUNiLEtBQUssRUFBRSxRQUFRO1FBQ2YsQ0FBQyxFQUFFLE9BQU87UUFDVixJQUFJLEVBQUUsT0FB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WUFBWSxFQUFFLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDO0FBQ3BELENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6Im5vZGVfbW9kdWxlcy90eXBlc2NyaXB0L0d1bHBmaWxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cInNjcmlwdHMvdHlwZXMvYW1iaWVudC5kLnRzXCIgLz5cclxuaW1wb3J0ICogYXMgY3AgZnJvbSBcImNoaWxkX3Byb2Nlc3NcIjtcclxuaW1wb3J0ICogYXMgcGF0aCBmcm9tIFwicGF0aFwiO1xyXG5pbXBvcnQgKiBhcyBmcyBmcm9tIFwiZnNcIjtcclxuaW1wb3J0IG9yaWdpbmFsR3VscCA9IHJlcXVpcmUoXCJndWxwXCIpO1xyXG5pbXBvcnQgaGVscE1ha2VyID0gcmVxdWlyZShcImd1bHAtaGVscFwiKTtcclxuaW1wb3J0IHJ1blNlcXVlbmNlID0gcmVxdWlyZShcInJ1bi1zZXF1ZW5jZVwiKTtcclxuaW1wb3J0IGNvbmNhdCA9IHJlcXVpcmUoXCJndWxwLWNvbmNhdFwiKTtcclxuaW1wb3J0IGNsb25lID0gcmVxdWlyZShcImd1bHAtY2xvbmVcIik7XHJcbmltcG9ydCBuZXdlciA9IHJlcXVpcmUoXCJndWxwLW5ld2VyXCIpO1xyXG5pbXBvcnQgdHNjID0gcmVxdWlyZShcImd1bHAtdHlwZXNjcmlwdFwiKTtcclxuZGVjbGFyZSBtb2R1bGUgXCJndWxwLXR5cGVzY3JpcHRcIiB7XHJcbiAgICBpbnRlcmZhY2UgU2V0dGluZ3Mge1xyXG4gICAgICAgIHByZXR0eT86IGJvb2xlYW47XHJcbiAgICAgICAgbmV3TGluZT86IHN0cmluZztcclxuICAgICAgICBub0ltcGxpY2l0VGhpcz86IGJvb2xlYW47XHJcbiAgICAgICAgc3RyaXBJbnRlcm5hbD86IGJvb2xlYW47XHJcbiAgICAgICAgdHlwZXM/OiBzdHJpbmdbXTtcclxuICAgIH1cclxufVxyXG5pbXBvcnQgKiBhcyBpbnNlcnQgZnJvbSBcImd1bHAtaW5zZXJ0XCI7XHJcbmltcG9ydCAqIGFzIHNvdXJjZW1hcHMgZnJvbSBcImd1bHAtc291cmNlbWFwc1wiO1xyXG5pbXBvcnQgUSA9IHJlcXVpcmUoXCJxXCIpO1xyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgICAvLyBgZGVsYCBmdXJ0aGVyIGRlcGVuZHMgb24gYFByb21pc2VgIChhbmQgaXMgYWxzbyBub3QgaW5jbHVkZWQpLCBzbyB3ZSBqdXN0LCBwYXRjaCB0aGUgZ2xvYmFsIHNjb3BlJ3MgUHJvbWlzZSB0byBRJ3MgKHdoaWNoIHdlIGFscmVhZHkgaW5jbHVkZSBpbiBvdXIgZGVwcyBiZWNhdXNlIGd1bHAgZGVwZW5kcyBvbiBpdClcclxuICAgIHR5cGUgUHJvbWlzZTxUPiA9IFEuUHJvbWlzZTxUPjtcclxufVxyXG5pbXBvcnQgZGVsID0gcmVxdWlyZShcImRlbFwiKTtcclxuaW1wb3J0IG1rZGlyUCA9IHJlcXVpcmUoXCJta2RpcnBcIik7XHJcbmltcG9ydCBtaW5pbWlzdCA9IHJlcXVpcmUoXCJtaW5pbWlzdFwiKTtcclxuaW1wb3J0IGJyb3dzZXJpZnkgPSByZXF1aXJlKFwiYnJvd3NlcmlmeVwiKTtcclxuaW1wb3J0IHRocm91Z2gyID0gcmVxdWlyZShcInRocm91Z2gyXCIpO1xyXG5pbXBvcnQgbWVyZ2UyID0gcmVxdWlyZShcIm1lcmdlMlwiKTtcclxuaW1wb3J0IGludG9TdHJlYW0gPSByZXF1aXJlKFwiaW50by1zdHJlYW1cIik7XHJcbmltcG9ydCAqIGFzIG9zIGZyb20gXCJvc1wiO1xyXG5pbXBvcnQgZm9sZCA9IHJlcXVpcmUoXCJ0cmF2aXMtZm9sZFwiKTtcclxuY29uc3QgZ3VscCA9IGhlbHBNYWtlcihvcmlnaW5hbEd1bHApO1xyXG5jb25zdCBtb2NoYVBhcmFsbGVsID0gcmVxdWlyZShcIi4vc2NyaXB0cy9tb2NoYS1wYXJhbGxlbC5qc1wiKTtcclxuY29uc3Qge3J1blRlc3RzSW5QYXJhbGxlbH0gPSBtb2NoYVBhcmFsbGVsO1xyXG5cclxuRXJyb3Iuc3RhY2tUcmFjZUxpbWl0ID0gMTAwMDtcclxuXHJcbmNvbnN0IGNtZExpbmVPcHRpb25zID0gbWluaW1pc3QocHJvY2Vzcy5hcmd2LnNsaWNlKDIpLCB7XHJcbiAgICBib29sZWFuOiBbXCJkZWJ1Z1wiLCBcImxpZ2h0XCIsIFwiY29sb3JzXCIsIFwibGludFwiLCBcInNvZnRcIl0sXHJcbiAgICBzdHJpbmc6IFtcImJyb3dzZXJcIiwgXCJ0ZXN0c1wiLCBcImhvc3RcIiwgXCJyZXBvcnRlclwiLCBcInN0YWNrVHJhY2VMaW1pdFwiXSxcclxuICAgIGFsaWFzOiB7XHJcbiAgICAgICAgZDogXCJkZWJ1Z1wiLFxyXG4gICAgICAgIHQ6IFwidGVzdHNcIixcclxuICAgICAgICB0ZXN0OiBcInRlc3RzXCIsXHJcbiAgICAgICAgcjogXCJyZXBvcnRlclwiLFxyXG4gICAgICAgIGNvbG9yOiBcImNvbG9yc1wiLFxyXG4gICAgICAgIGY6IFwiZmlsZXNcIixcclxuICAgICAgICBmaWxlOiBcImZpbGVzXCJcclxuICAgIH0sXHJcbiAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgc29mdDogZmFsc2UsXHJcbiAgICAgICAgY29sb3JzOiBwcm9jZXNzLmVudi5jb2xvcnMgfHwgcHJvY2Vzcy5lbnYuY29sb3IgfHwgdHJ1ZSxcclxuICAgICAgICBkZWJ1ZzogcHJvY2Vzcy5lbnYuZGVidWcgfHwgcHJvY2Vzcy5lbnYuZCxcclxuICAgICAgICBob3N0OiBwcm9jZXNzLmVudi5UWVBFU0NSSVBUX0hPU1QgfHwgcHJvY2Vzcy5lbnYuaG9zdCB8fCBcIm5vZGVcIixcclxuICAgICAgICBicm93c2VyOiBwcm9jZXNzLmVudi5icm93c2VyIHx8IHByb2Nlc3MuZW52LmIgfHwgXCJJRVwiLFxyXG4gICAgICAgIHRlc3RzOiBwcm9jZXNzLmVudi50ZXN0IHx8IHByb2Nlc3MuZW52LnRlc3RzIHx8IHByb2Nlc3MuZW52LnQsXHJcbiAgICAgICAgbGlnaHQ6IHByb2Nlc3MuZW52LmxpZ2h0IHx8IGZhbHNlLFxyXG4gICAgICAgIHJlcG9ydGVyOiBwcm9jZXNzLmVudi5yZXBvcnRlciB8fCBwcm9jZXNzLmVudi5yLFxyXG4gICAgICAgIGxpbnQ6IHByb2Nlc3MuZW52LmxpbnQgfHwgdHJ1ZSxcclxuICAgICAgICBmaWxlczogcHJvY2Vzcy5lbnYuZiB8fCBwcm9jZXNzLmVudi5maWxlIHx8IHByb2Nlc3MuZW52LmZpbGVzIHx8IFwiXCIsXHJcbiAgICB9XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gZXhlYyhjbWQ6IHN0cmluZywgYXJnczogc3RyaW5nW10sIGNvbXBsZXRlOiAoKSA9PiB2b2lkID0gKCgpID0+IHsgfSksIGVycm9yOiAoZTogYW55LCBzdGF0dXM6IG51bWJlcikgPT4gdm9pZCA9ICgoKSA9PiB7IH0pKSB7XHJcbiAgICBjb25zb2xlLmxvZyhgJHtjbWR9ICR7YXJncy5qb2luKFwiIFwiKX1gKTtcclxuICAgIC8vIFRPRE8gKHdlc3dpZyk6IFVwZGF0ZSBjaGlsZF9wcm9jZXNzIHR5cGVzIHRvIGFkZCB3aW5kb3dzVmVyYmF0aW1Bcmd1bWVudHMgdG8gdGhlIHR5cGUgZGVmaW5pdGlvblxyXG4gICAgY29uc3Qgc3Vic2hlbGxGbGFnID0gaXNXaW4gPyBcIi9jXCIgOiBcIi1jXCI7XHJcbiAgICBjb25zdCBjb21tYW5kID0gaXNXaW4gPyBbcG9zc2libHlRdW90ZShjbWQpLCAuLi5hcmdzXSA6IFtgJHtjbWR9ICR7YXJncy5qb2luKFwiIFwiKX1gXTtcclxuICAgIGNvbnN0IGV4ID0gY3Auc3Bhd24oaXNXaW4gPyBcImNtZFwiIDogXCIvYmluL3NoXCIsIFtzdWJzaGVsbEZsYWcsIC4uLmNvbW1hbmRdLCB7IHN0ZGlvOiBcImluaGVyaXRcIiwgd2luZG93c1ZlcmJhdGltQXJndW1lbnRzOiB0cnVlIH0gYXMgYW55KTtcclxuICAgIGV4Lm9uKFwiZXhpdFwiLCAoY29kZSkgPT4gY29kZSA9PT0gMCA/IGNvbXBsZXRlKCkgOiBlcnJvcigvKmUqLyB1bmRlZmluZWQsIGNvZGUpKTtcclxuICAgIGV4Lm9uKFwiZXJyb3JcIiwgZXJyb3IpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwb3NzaWJseVF1b3RlKGNtZDogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gY21kLmluZGV4T2YoXCIgXCIpID49IDAgPyBgXCIke2NtZH1cImAgOiBjbWQ7XHJcbn1cclxuXHJcbmxldCB1c2VEZWJ1Z01vZGUgPSB0cnVlO1xyXG5sZXQgaG9zdCA9IGNtZExpbmVPcHRpb25zW1wiaG9zdFwiXTtcclxuXHJcbi8vIENvbnN0YW50c1xyXG5jb25zdCBjb21waWxlckRpcmVjdG9yeSA9IFwic3JjL2NvbXBpbGVyL1wiO1xyXG5jb25zdCBoYXJuZXNzRGlyZWN0b3J5ID0gXCJzcmMvaGFybmVzcy9cIjtcclxuY29uc3QgbGlicmFyeURpcmVjdG9yeSA9IFwic3JjL2xpYi9cIjtcclxuY29uc3Qgc2NyaXB0c0RpcmVjdG9yeSA9IFwic2NyaXB0cy9cIjtcclxuY29uc3QgZG9jRGlyZWN0b3J5ID0gXCJkb2MvXCI7XHJcblxyXG5jb25zdCBidWlsdERpcmVjdG9yeSA9IFwiYnVpbHQvXCI7XHJcbmNvbnN0IGJ1aWx0TG9jYWxEaXJlY3RvcnkgPSBcImJ1aWx0L2xvY2FsL1wiO1xyXG5jb25zdCBMS0dEaXJlY3RvcnkgPSBcImxpYi9cIjtcclxuXHJcbmNvbnN0IGNvcHlyaWdodCA9IFwiQ29weXJpZ2h0Tm90aWNlLnR4dFwiO1xyXG5cclxuY29uc3QgY29tcGlsZXJGaWxlbmFtZSA9IFwidHNjLmpzXCI7XHJcbmNvbnN0IExLR0NvbXBpbGVyID0gcGF0aC5qb2luKExLR0RpcmVjdG9yeSwgY29tcGlsZXJGaWxlbmFtZSk7XHJcbmNvbnN0IGJ1aWx0TG9jYWxDb21waWxlciA9IHBhdGguam9pbihidWlsdExvY2FsRGlyZWN0b3J5LCBjb21waWxlckZpbGVuYW1lKTtcclxuXHJcbmNvbnN0IG5vZGVNb2R1bGVzUGF0aFByZWZpeCA9IHBhdGgucmVzb2x2ZShcIi4vbm9kZV9tb2R1bGVzLy5iaW4vXCIpO1xyXG5jb25zdCBpc1dpbiA9IC9ed2luLy50ZXN0KHByb2Nlc3MucGxhdGZvcm0pO1xyXG5jb25zdCBtb2NoYSA9IHBhdGguam9pbihub2RlTW9kdWxlc1BhdGhQcmVmaXgsIFwibW9jaGFcIikgKyAoaXNXaW4gPyBcIi5jbWRcIiA6IFwiXCIpO1xyXG5cclxuY29uc3QgZXMyMDE1TGlicmFyeVNvdXJjZXMgPSBbXHJcbiAgICBcImVzMjAxNS5jb3JlLmQudHNcIixcclxuICAgIFwiZXMyMDE1LmNvbGxlY3Rpb24uZC50c1wiLFxyXG4gICAgXCJlczIwMTUuZ2VuZXJhdG9yLmQudHNcIixcclxuICAgIFwiZXMyMDE1Lml0ZXJhYmxlLmQudHNcIixcclxuICAgIFwiZXMyMDE1LnByb21pc2UuZC50c1wiLFxyXG4gICAgXCJlczIwMTUucHJveHkuZC50c1wiLFxyXG4gICAgXCJlczIwMTUucmVmbGVjdC5kLnRzXCIsXHJcbiAgICBcImVzMjAxNS5zeW1ib2wuZC50c1wiLFxyXG4gICAgXCJlczIwMTUuc3ltYm9sLndlbGxrbm93bi5kLnRzXCJcclxuXTtcclxuXHJcbmNvbnN0IGVzMjAxNUxpYnJhcnlTb3VyY2VNYXAgPSBlczIwMTVMaWJyYXJ5U291cmNlcy5tYXAoZnVuY3Rpb24oc291cmNlKSB7XHJcbiAgICByZXR1cm4geyB0YXJnZXQ6IFwibGliLlwiICsgc291cmNlLCBzb3VyY2VzOiBbXCJoZWFkZXIuZC50c1wiLCBzb3VyY2VdIH07XHJcbn0pO1xyXG5cclxuY29uc3QgZXMyMDE2TGlicmFyeVNvdXJjZSA9IFtcImVzMjAxNi5hcnJheS5pbmNsdWRlLmQudHNcIl07XHJcblxyXG5jb25zdCBlczIwMTZMaWJyYXJ5U291cmNlTWFwID0gZXMyMDE2TGlicmFyeVNvdXJjZS5tYXAoZnVuY3Rpb24oc291cmNlKSB7XHJcbiAgICByZXR1cm4geyB0YXJnZXQ6IFwibGliLlwiICsgc291cmNlLCBzb3VyY2VzOiBbXCJoZWFkZXIuZC50c1wiLCBzb3VyY2VdIH07XHJcbn0pO1xyXG5cclxuY29uc3QgZXMyMDE3TGlicmFyeVNvdXJjZSA9IFtcclxuICAgIFwiZXMyMDE3Lm9iamVjdC5kLnRzXCIsXHJcbiAgICBcImVzMjAxNy5zaGFyZWRtZW1vcnkuZC50c1wiLFxyXG4gICAgXCJlczIwMTcuc3RyaW5nLmQudHNcIixcclxuXTtcclxuXHJcbmNvbnN0IGVzMjAxN0xpYnJhcnlTb3VyY2VNYXAgPSBlczIwMTdMaWJyYXJ5U291cmNlLm1hcChmdW5jdGlvbihzb3VyY2UpIHtcclxuICAgIHJldHVybiB7IHRhcmdldDogXCJsaWIuXCIgKyBzb3VyY2UsIHNvdXJjZXM6IFtcImhlYWRlci5kLnRzXCIsIHNvdXJjZV0gfTtcclxufSk7XHJcblxyXG5jb25zdCBob3N0c0xpYnJhcnlTb3VyY2VzID0gW1wiZG9tLmdlbmVyYXRlZC5kLnRzXCIsIFwid2Vid29ya2VyLmltcG9ydHNjcmlwdHMuZC50c1wiLCBcInNjcmlwdGhvc3QuZC50c1wiXTtcclxuXHJcbmNvbnN0IGxpYnJhcnlTb3VyY2VNYXAgPSBbXHJcbiAgICAvLyBIb3N0IGxpYnJhcnlcclxuICAgIHsgdGFyZ2V0OiBcImxpYi5kb20uZC50c1wiLCBzb3VyY2VzOiBbXCJoZWFkZXIuZC50c1wiLCBcImRvbS5nZW5lcmF0ZWQuZC50c1wiXSB9LFxyXG4gICAgeyB0YXJnZXQ6IFwibGliLmRvbS5pdGVyYWJsZS5kLnRzXCIsIHNvdXJjZXM6IFtcImhlYWRlci5kLnRzXCIsIFwiZG9tLml0ZXJhYmxlLmQudHNcIl0gfSxcclxuICAgIHsgdGFyZ2V0OiBcImxpYi53ZWJ3b3JrZXIuZC50c1wiLCBzb3VyY2VzOiBbXCJoZWFkZXIuZC50c1wiLCBcIndlYndvcmtlci5nZW5lcmF0ZWQuZC50c1wiXSB9LFxyXG4gICAgeyB0YXJnZXQ6IFwibGliLnNjcmlwdGhvc3QuZC50c1wiLCBzb3VyY2VzOiBbXCJoZWFkZXIuZC50c1wiLCBcInNjcmlwdGhvc3QuZC50c1wiXSB9LFxyXG5cclxuICAgIC8vIEphdmFTY3JpcHQgbGlicmFyeVxyXG4gICAgeyB0YXJnZXQ6IFwibGliLmVzNS5kLnRzXCIsIHNvdXJjZXM6IFtcImhlYWRlci5kLnRzXCIsIFwiZXM1LmQudHNcIl0gfSxcclxuICAgIHsgdGFyZ2V0OiBcImxpYi5lczIwMTUuZC50c1wiLCBzb3VyY2VzOiBbXCJoZWFkZXIuZC50c1wiLCBcImVzMjAxNS5kLnRzXCJdIH0sXHJcbiAgICB7IHRhcmdldDogXCJsaWIuZXMyMDE2LmQudHNcIiwgc291cmNlczogW1wiaGVhZGVyLmQudHNcIiwgXCJlczIwMTYuZC50c1wiXSB9LFxyXG4gICAgeyB0YXJnZXQ6IFwibGliLmVzMjAxNy5kLnRzXCIsIHNvdXJjZXM6IFtcImhlYWRlci5kLnRzXCIsIFwiZXMyMDE3LmQudHNcIl0gfSxcclxuXHJcbiAgICAvLyBKYXZhU2NyaXB0ICsgYWxsIGhvc3QgbGlicmFyeVxyXG4gICAgeyB0YXJnZXQ6IFwibGliLmQudHNcIiwgc291cmNlczogW1wiaGVhZGVyLmQudHNcIiwgXCJlczUuZC50c1wiXS5jb25jYXQoaG9zdHNMaWJyYXJ5U291cmNlcykgfSxcclxuICAgIHsgdGFyZ2V0OiBcImxpYi5lczYuZC50c1wiLCBzb3VyY2VzOiBbXCJoZWFkZXIuZC50c1wiLCBcImVzNS5kLnRzXCJdLmNvbmNhdChlczIwMTVMaWJyYXJ5U291cmNlcywgaG9zdHNMaWJyYXJ5U291cmNlcywgXCJkb20uaXRlcmFibGUuZC50c1wiKSB9XHJcbl0uY29uY2F0KGVzMjAxNUxpYnJhcnlTb3VyY2VNYXAsIGVzMjAxNkxpYnJhcnlTb3VyY2VNYXAsIGVzMjAxN0xpYnJhcnlTb3VyY2VNYXApO1xyXG5cclxuY29uc3QgbGlicmFyeVRhcmdldHMgPSBsaWJyYXJ5U291cmNlTWFwLm1hcChmdW5jdGlvbihmKSB7XHJcbiAgICByZXR1cm4gcGF0aC5qb2luKGJ1aWx0TG9jYWxEaXJlY3RvcnksIGYudGFyZ2V0KTtcclxufSk7XHJcblxyXG5mb3IgKGNvbnN0IGkgaW4gbGlicmFyeVRhcmdldHMpIHtcclxuICAgIGNvbnN0IGVudHJ5ID0gbGlicmFyeVNvdXJjZU1hcFtpXTtcclxuICAgIGNvbnN0IHRhcmdldCA9IGxpYnJhcnlUYXJnZXRzW2ldO1xyXG4gICAgY29uc3Qgc291cmNlcyA9IFtjb3B5cmlnaHRdLmNvbmNhdChlbnRyeS5zb3VyY2VzLm1hcChmdW5jdGlvbihzKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhdGguam9pbihsaWJyYXJ5RGlyZWN0b3J5LCBzKTtcclxuICAgIH0pKTtcclxuICAgIGd1bHAudGFzayh0YXJnZXQsIGZhbHNlLCBbXSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGd1bHAuc3JjKHNvdXJjZXMpXHJcbiAgICAgICAgICAgIC5waXBlKG5ld2VyKHRhcmdldCkpXHJcbiAgICAgICAgICAgIC5waXBlKGNvbmNhdCh0YXJnZXQsIHsgbmV3TGluZTogXCJcXG5cXG5cIiB9KSlcclxuICAgICAgICAgICAgLnBpcGUoZ3VscC5kZXN0KFwiLlwiKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuY29uc3QgY29uZmlndXJlTmlnaHRseUpzID0gcGF0aC5qb2luKHNjcmlwdHNEaXJlY3RvcnksIFwiY29uZmlndXJlTmlnaHRseS5qc1wiKTtcclxuY29uc3QgY29uZmlndXJlTmlnaHRseVRzID0gcGF0aC5qb2luKHNjcmlwdHNEaXJlY3RvcnksIFwiY29uZmlndXJlTmlnaHRseS50c1wiKTtcclxuY29uc3QgcGFja2FnZUpzb24gPSBcInBhY2thZ2UuanNvblwiO1xyXG5jb25zdCB2ZXJzaW9uRmlsZSA9IHBhdGguam9pbihjb21waWxlckRpcmVjdG9yeSwgXCJjb3JlLnRzXCIpO1xyXG5cclxuZnVuY3Rpb24gbmVlZHNVcGRhdGUoc291cmNlOiBzdHJpbmcgfCBzdHJpbmdbXSwgZGVzdDogc3RyaW5nIHwgc3RyaW5nW10pOiBib29sZWFuIHtcclxuICAgIGlmICh0eXBlb2Ygc291cmNlID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiBkZXN0ID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMoZGVzdCkpIHtcclxuICAgICAgICAgICAgY29uc3Qge210aW1lOiBvdXRUaW1lfSA9IGZzLnN0YXRTeW5jKGRlc3QpO1xyXG4gICAgICAgICAgICBjb25zdCB7bXRpbWU6IGluVGltZX0gPSBmcy5zdGF0U3luYyhzb3VyY2UpO1xyXG4gICAgICAgICAgICBpZiAoK2luVGltZSA8PSArb3V0VGltZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mIHNvdXJjZSA9PT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgZGVzdCAhPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgIGNvbnN0IHttdGltZTogaW5UaW1lfSA9IGZzLnN0YXRTeW5jKHNvdXJjZSk7XHJcbiAgICAgICAgZm9yIChjb25zdCBmaWxlcGF0aCBvZiBkZXN0KSB7XHJcbiAgICAgICAgICAgIGlmIChmcy5leGlzdHNTeW5jKGZpbGVwYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qge210aW1lOiBvdXRUaW1lfSA9IGZzLnN0YXRTeW5jKGZpbGVwYXRoKTtcclxuICAgICAgICAgICAgICAgIGlmICgraW5UaW1lID4gK291dFRpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiBzb3VyY2UgIT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIGRlc3QgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhkZXN0KSkge1xyXG4gICAgICAgICAgICBjb25zdCB7bXRpbWU6IG91dFRpbWV9ID0gZnMuc3RhdFN5bmMoZGVzdCk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZXBhdGggb2Ygc291cmNlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhmaWxlcGF0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7bXRpbWU6IGluVGltZX0gPSBmcy5zdGF0U3luYyhmaWxlcGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCtpblRpbWUgPiArb3V0VGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mIHNvdXJjZSAhPT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgZGVzdCAhPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc291cmNlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICghZGVzdFtpXSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMoZGVzdFtpXSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHttdGltZTogb3V0VGltZX0gPSBmcy5zdGF0U3luYyhkZXN0W2ldKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHttdGltZTogaW5UaW1lfSA9IGZzLnN0YXRTeW5jKHNvdXJjZVtpXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoK2luVGltZSA+ICtvdXRUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q29tcGlsZXJTZXR0aW5ncyhiYXNlOiB0c2MuU2V0dGluZ3MsIHVzZUJ1aWx0Q29tcGlsZXI/OiBib29sZWFuKTogdHNjLlNldHRpbmdzIHtcclxuICAgIGNvbnN0IGNvcHk6IHRzYy5TZXR0aW5ncyA9IHt9O1xyXG4gICAgY29weS5ub0VtaXRPbkVycm9yID0gdHJ1ZTtcclxuICAgIGNvcHkubm9JbXBsaWNpdEFueSA9IHRydWU7XHJcbiAgICBjb3B5Lm5vSW1wbGljaXRUaGlzID0gdHJ1ZTtcclxuICAgIGNvcHkucHJldHR5ID0gdHJ1ZTtcclxuICAgIGNvcHkudHlwZXMgPSBbXTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIGJhc2UpIHtcclxuICAgICAgICBjb3B5W2tleV0gPSBiYXNlW2tleV07XHJcbiAgICB9XHJcbiAgICBpZiAoIXVzZURlYnVnTW9kZSkge1xyXG4gICAgICAgIGlmIChjb3B5LnJlbW92ZUNvbW1lbnRzID09PSB1bmRlZmluZWQpIGNvcHkucmVtb3ZlQ29tbWVudHMgPSB0cnVlO1xyXG4gICAgICAgIGNvcHkubmV3TGluZSA9IFwibGZcIjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvcHkucHJlc2VydmVDb25zdEVudW1zID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGlmICh1c2VCdWlsdENvbXBpbGVyID09PSB0cnVlKSB7XHJcbiAgICAgICAgY29weS50eXBlc2NyaXB0ID0gcmVxdWlyZShcIi4vYnVpbHQvbG9jYWwvdHlwZXNjcmlwdC5qc1wiKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHVzZUJ1aWx0Q29tcGlsZXIgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgY29weS50eXBlc2NyaXB0ID0gcmVxdWlyZShcIi4vbGliL3R5cGVzY3JpcHQuanNcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY29weTtcclxufVxyXG5cclxuZ3VscC50YXNrKGNvbmZpZ3VyZU5pZ2h0bHlKcywgZmFsc2UsIFtdLCAoKSA9PiB7XHJcbiAgICBjb25zdCBzZXR0aW5nczogdHNjLlNldHRpbmdzID0ge1xyXG4gICAgICAgIGRlY2xhcmF0aW9uOiBmYWxzZSxcclxuICAgICAgICByZW1vdmVDb21tZW50czogdHJ1ZSxcclxuICAgICAgICBub1Jlc29sdmU6IGZhbHNlLFxyXG4gICAgICAgIHN0cmlwSW50ZXJuYWw6IGZhbHNlLFxyXG4gICAgfTtcclxuICAgIHJldHVybiBndWxwLnNyYyhjb25maWd1cmVOaWdodGx5VHMpXHJcbiAgICAgICAgLnBpcGUoc291cmNlbWFwcy5pbml0KCkpXHJcbiAgICAgICAgLnBpcGUodHNjKHNldHRpbmdzKSlcclxuICAgICAgICAucGlwZShzb3VyY2VtYXBzLndyaXRlKHBhdGguZGlybmFtZShjb25maWd1cmVOaWdodGx5SnMpKSlcclxuICAgICAgICAucGlwZShndWxwLmRlc3QocGF0aC5kaXJuYW1lKGNvbmZpZ3VyZU5pZ2h0bHlKcykpKTtcclxufSk7XHJcblxyXG5cclxuLy8gTmlnaHRseSBtYW5hZ2VtZW50IHRhc2tzXHJcbmd1bHAudGFzayhcImNvbmZpZ3VyZS1uaWdodGx5XCIsIFwiUnVucyBzY3JpcHRzL2NvbmZpZ3VyZU5pZ2h0bHkudHMgdG8gcHJlcGFyZSBhIGJ1aWxkIGZvciBuaWdodGx5IHB1Ymxpc2hpbmdcIiwgW2NvbmZpZ3VyZU5pZ2h0bHlKc10sIChkb25lKSA9PiB7XHJcbiAgICBleGVjKGhvc3QsIFtjb25maWd1cmVOaWdodGx5SnMsIHBhY2thZ2VKc29uLCB2ZXJzaW9uRmlsZV0sIGRvbmUsIGRvbmUpO1xyXG59KTtcclxuZ3VscC50YXNrKFwicHVibGlzaC1uaWdodGx5XCIsIFwiUnVucyBgbnBtIHB1Ymxpc2ggLS10YWcgbmV4dGAgdG8gY3JlYXRlIGEgbmV3IG5pZ2h0bHkgYnVpbGQgb24gbnBtXCIsIFtcIkxLR1wiXSwgKCkgPT4ge1xyXG4gICAgcmV0dXJuIHJ1blNlcXVlbmNlKFwiY2xlYW5cIiwgXCJ1c2VEZWJ1Z01vZGVcIiwgXCJydW50ZXN0c1wiLCAoZG9uZSkgPT4ge1xyXG4gICAgICAgIGV4ZWMoXCJucG1cIiwgW1wicHVibGlzaFwiLCBcIi0tdGFnXCIsIFwibmV4dFwiXSwgZG9uZSwgZG9uZSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5jb25zdCBpbXBvcnREZWZpbml0ZWx5VHlwZWRUZXN0c0RpcmVjdG9yeSA9IHBhdGguam9pbihzY3JpcHRzRGlyZWN0b3J5LCBcImltcG9ydERlZmluaXRlbHlUeXBlZFRlc3RzXCIpO1xyXG5jb25zdCBpbXBvcnREZWZpbml0ZWx5VHlwZWRUZXN0c0pzID0gcGF0aC5qb2luKGltcG9ydERlZmluaXRlbHlUeXBlZFRlc3RzRGlyZWN0b3J5LCBcImltcG9ydERlZmluaXRlbHlUeXBlZFRlc3RzLmpzXCIpO1xyXG5jb25zdCBpbXBvcnREZWZpbml0ZWx5VHlwZWRUZXN0c1RzID0gcGF0aC5qb2luKGltcG9ydERlZmluaXRlbHlUeXBlZFRlc3RzRGlyZWN0b3J5LCBcImltcG9ydERlZmluaXRlbHlUeXBlZFRlc3RzLnRzXCIpO1xyXG5cclxuZ3VscC50YXNrKGltcG9ydERlZmluaXRlbHlUeXBlZFRlc3RzSnMsIGZhbHNlLCBbXSwgKCkgPT4ge1xyXG4gICAgY29uc3Qgc2V0dGluZ3M6IHRzYy5TZXR0aW5ncyA9IGdldENvbXBpbGVyU2V0dGluZ3Moe1xyXG4gICAgICAgIGRlY2xhcmF0aW9uOiBmYWxzZSxcclxuICAgICAgICByZW1vdmVDb21tZW50czogdHJ1ZSxcclxuICAgICAgICBub1Jlc29sdmU6IGZhbHNlLFxyXG4gICAgICAgIHN0cmlwSW50ZXJuYWw6IGZhbHNlLFxyXG4gICAgICAgIG91dEZpbGU6IGltcG9ydERlZmluaXRlbHlUeXBlZFRlc3RzSnNcclxuICAgIH0sIC8qdXNlQnVpbHRDb21waWxlciovIGZhbHNlKTtcclxuICAgIHJldHVybiBndWxwLnNyYyhpbXBvcnREZWZpbml0ZWx5VHlwZWRUZXN0c1RzKVxyXG4gICAgICAgIC5waXBlKHNvdXJjZW1hcHMuaW5pdCgpKVxyXG4gICAgICAgIC5waXBlKHRzYyhzZXR0aW5ncykpXHJcbiAgICAgICAgLnBpcGUoc291cmNlbWFwcy53cml0ZShcIi5cIikpXHJcbiAgICAgICAgLnBpcGUoZ3VscC5kZXN0KFwiLlwiKSk7XHJcbn0pO1xyXG5cclxuZ3VscC50YXNrKFwiaW1wb3J0RGVmaW5pdGVseVR5cGVkVGVzdHNcIiwgXCJSdW5zIHNjcmlwdHMvaW1wb3J0RGVmaW5pdGVseVR5cGVkVGVzdHMvaW1wb3J0RGVmaW5pdGVseVR5cGVkVGVzdHMudHMgdG8gY29weSBEVCdzIHRlc3RzIHRvIHRoZSBUUy1pbnRlcm5hbCBSV0MgdGVzdHNcIiwgW2ltcG9ydERlZmluaXRlbHlUeXBlZFRlc3RzSnNdLCAoZG9uZSkgPT4ge1xyXG4gICAgZXhlYyhob3N0LCBbaW1wb3J0RGVmaW5pdGVseVR5cGVkVGVzdHNKcywgXCIuL1wiLCBcIi4uL0RlZmluaXRlbHlUeXBlZFwiXSwgZG9uZSwgZG9uZSk7XHJcbn0pO1xyXG5cclxuZ3VscC50YXNrKFwibGliXCIsIFwiQnVpbGRzIHRoZSBsaWJyYXJ5IHRhcmdldHNcIiwgbGlicmFyeVRhcmdldHMpO1xyXG5cclxuXHJcbi8vIEdlbmVyYXRlIGRpYWdub3N0aWNzXHJcbmNvbnN0IHByb2Nlc3NEaWFnbm9zdGljTWVzc2FnZXNKcyA9IHBhdGguam9pbihzY3JpcHRzRGlyZWN0b3J5LCBcInByb2Nlc3NEaWFnbm9zdGljTWVzc2FnZXMuanNcIik7XHJcbmNvbnN0IHByb2Nlc3NEaWFnbm9zdGljTWVzc2FnZXNUcyA9IHBhdGguam9pbihzY3JpcHRzRGlyZWN0b3J5LCBcInByb2Nlc3NEaWFnbm9zdGljTWVzc2FnZXMudHNcIik7XHJcbmNvbnN0IGRpYWdub3N0aWNNZXNzYWdlc0pzb24gPSBwYXRoLmpvaW4oY29tcGlsZXJEaXJlY3RvcnksIFwiZGlhZ25vc3RpY01lc3NhZ2VzLmpzb25cIik7XHJcbmNvbnN0IGRpYWdub3N0aWNJbmZvTWFwVHMgPSBwYXRoLmpvaW4oY29tcGlsZXJEaXJlY3RvcnksIFwiZGlhZ25vc3RpY0luZm9ybWF0aW9uTWFwLmdlbmVyYXRlZC50c1wiKTtcclxuY29uc3QgZ2VuZXJhdGVkRGlhZ25vc3RpY01lc3NhZ2VzSlNPTiA9IHBhdGguam9pbihjb21waWxlckRpcmVjdG9yeSwgXCJkaWFnbm9zdGljTWVzc2FnZXMuZ2VuZXJhdGVkLmpzb25cIik7XHJcbmNvbnN0IGJ1aWx0R2VuZXJhdGVkRGlhZ25vc3RpY01lc3NhZ2VzSlNPTiA9IHBhdGguam9pbihidWlsdExvY2FsRGlyZWN0b3J5LCBcImRpYWdub3N0aWNNZXNzYWdlcy5nZW5lcmF0ZWQuanNvblwiKTtcclxuXHJcbi8vIHByb2Nlc3NEaWFnbm9zdGljTWVzc2FnZXMgc2NyaXB0XHJcbmd1bHAudGFzayhwcm9jZXNzRGlhZ25vc3RpY01lc3NhZ2VzSnMsIGZhbHNlLCBbXSwgKCkgPT4ge1xyXG4gICAgY29uc3Qgc2V0dGluZ3M6IHRzYy5TZXR0aW5ncyA9IGdldENvbXBpbGVyU2V0dGluZ3Moe1xyXG4gICAgICAgIGRlY2xhcmF0aW9uOiBmYWxzZSxcclxuICAgICAgICByZW1vdmVDb21tZW50czogdHJ1ZSxcclxuICAgICAgICBub1Jlc29sdmU6IGZhbHNlLFxyXG4gICAgICAgIHN0cmlwSW50ZXJuYWw6IGZhbHNlLFxyXG4gICAgICAgIG91dEZpbGU6IHByb2Nlc3NEaWFnbm9zdGljTWVzc2FnZXNKc1xyXG4gICAgfSwgLyp1c2VCdWlsdENvbXBpbGVyKi8gZmFsc2UpO1xyXG4gICAgcmV0dXJuIGd1bHAuc3JjKHByb2Nlc3NEaWFnbm9zdGljTWVzc2FnZXNUcylcclxuICAgICAgICAucGlwZShuZXdlcihwcm9jZXNzRGlhZ25vc3RpY01lc3NhZ2VzSnMpKVxyXG4gICAgICAgIC5waXBlKHNvdXJjZW1hcHMuaW5pdCgpKVxyXG4gICAgICAgIC5waXBlKHRzYyhzZXR0aW5ncykpXHJcbiAgICAgICAgLnBpcGUoc291cmNlbWFwcy53cml0ZShcIi5cIikpXHJcbiAgICAgICAgLnBpcGUoZ3VscC5kZXN0KFwiLlwiKSk7XHJcbn0pO1xyXG5cclxuLy8gVGhlIGdlbmVyYXRlZCBkaWFnbm9zdGljcyBtYXA7IGJ1aWx0IGZvciB0aGUgY29tcGlsZXIgYW5kIGZvciB0aGUgXCJnZW5lcmF0ZS1kaWFnbm9zdGljc1wiIHRhc2tcclxuZ3VscC50YXNrKGRpYWdub3N0aWNJbmZvTWFwVHMsIFtwcm9jZXNzRGlhZ25vc3RpY01lc3NhZ2VzSnNdLCAoZG9uZSkgPT4ge1xyXG4gICAgaWYgKG5lZWRzVXBkYXRlKGRpYWdub3N0aWNNZXNzYWdlc0pzb24sIFtnZW5lcmF0ZWREaWFnbm9zdGljTWVzc2FnZXNKU09OLCBkaWFnbm9zdGljSW5mb01hcFRzXSkpIHtcclxuICAgICAgICBleGVjKGhvc3QsIFtwcm9jZXNzRGlhZ25vc3RpY01lc3NhZ2VzSnMsIGRpYWdub3N0aWNNZXNzYWdlc0pzb25dLCBkb25lLCBkb25lKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGRvbmUoKTtcclxuICAgIH1cclxufSk7XHJcblxyXG5ndWxwLnRhc2soYnVpbHRHZW5lcmF0ZWREaWFnbm9zdGljTWVzc2FnZXNKU09OLCBbZGlhZ25vc3RpY0luZm9NYXBUc10sIChkb25lKSA9PiB7XHJcbiAgICBpZiAoZnMuZXhpc3RzU3luYyhidWlsdExvY2FsRGlyZWN0b3J5KSAmJiBuZWVkc1VwZGF0ZShnZW5lcmF0ZWREaWFnbm9zdGljTWVzc2FnZXNKU09OLCBidWlsdEdlbmVyYXRlZERpYWdub3N0aWNNZXNzYWdlc0pTT04pKSB7XHJcbiAgICAgICAgZnMud3JpdGVGaWxlU3luYyhidWlsdEdlbmVyYXRlZERpYWdub3N0aWNNZXNzYWdlc0pTT04sIGZzLnJlYWRGaWxlU3luYyhnZW5lcmF0ZWREaWFnbm9zdGljTWVzc2FnZXNKU09OKSk7XHJcbiAgICB9XHJcbiAgICBkb25lKCk7XHJcbn0pO1xyXG5cclxuZ3VscC50YXNrKFwiZ2VuZXJhdGUtZGlhZ25vc3RpY3NcIiwgXCJHZW5lcmF0ZXMgYSBkaWFnbm9zdGljIGZpbGUgaW4gVHlwZVNjcmlwdCBiYXNlZCBvbiBhbiBpbnB1dCBKU09OIGZpbGVcIiwgW2RpYWdub3N0aWNJbmZvTWFwVHNdKTtcclxuXHJcblxyXG5jb25zdCBzZXJ2aWNlc0ZpbGUgPSBwYXRoLmpvaW4oYnVpbHRMb2NhbERpcmVjdG9yeSwgXCJ0eXBlc2NyaXB0U2VydmljZXMuanNcIik7XHJcbmNvbnN0IHN0YW5kYWxvbmVEZWZpbml0aW9uc0ZpbGUgPSBwYXRoLmpvaW4oYnVpbHRMb2NhbERpcmVjdG9yeSwgXCJ0eXBlc2NyaXB0U2VydmljZXMuZC50c1wiKTtcclxuY29uc3Qgbm9kZVBhY2thZ2VGaWxlID0gcGF0aC5qb2luKGJ1aWx0TG9jYWxEaXJlY3RvcnksIFwidHlwZXNjcmlwdC5qc1wiKTtcclxuY29uc3Qgbm9kZURlZmluaXRpb25zRmlsZSA9IHBhdGguam9pbihidWlsdExvY2FsRGlyZWN0b3J5LCBcInR5cGVzY3JpcHQuZC50c1wiKTtcclxuY29uc3Qgbm9kZVN0YW5kYWxvbmVEZWZpbml0aW9uc0ZpbGUgPSBwYXRoLmpvaW4oYnVpbHRMb2NhbERpcmVjdG9yeSwgXCJ0eXBlc2NyaXB0X3N0YW5kYWxvbmUuZC50c1wiKTtcclxuXHJcbmxldCBjb3B5cmlnaHRDb250ZW50OiBzdHJpbmc7XHJcbmZ1bmN0aW9uIHByZXBlbmRDb3B5cmlnaHQob3V0cHV0Q29weXJpZ2h0OiBib29sZWFuID0gIXVzZURlYnVnTW9kZSkge1xyXG4gICAgcmV0dXJuIGluc2VydC5wcmVwZW5kKG91dHB1dENvcHlyaWdodCA/IChjb3B5cmlnaHRDb250ZW50IHx8IChjb3B5cmlnaHRDb250ZW50ID0gZnMucmVhZEZpbGVTeW5jKGNvcHlyaWdodCkudG9TdHJpbmcoKSkpIDogXCJcIik7XHJcbn1cclxuXHJcbmd1bHAudGFzayhidWlsdExvY2FsQ29tcGlsZXIsIGZhbHNlLCBbc2VydmljZXNGaWxlXSwgKCkgPT4ge1xyXG4gICAgY29uc3QgbG9jYWxDb21waWxlclByb2plY3QgPSB0c2MuY3JlYXRlUHJvamVjdChcInNyYy9jb21waWxlci90c2NvbmZpZy5qc29uXCIsIGdldENvbXBpbGVyU2V0dGluZ3Moe30sIC8qdXNlQnVpbHRDb21waWxlciovdHJ1ZSkpO1xyXG4gICAgcmV0dXJuIGxvY2FsQ29tcGlsZXJQcm9qZWN0LnNyYygpXHJcbiAgICAgICAgLnBpcGUobmV3ZXIoYnVpbHRMb2NhbENvbXBpbGVyKSlcclxuICAgICAgICAucGlwZShzb3VyY2VtYXBzLmluaXQoKSlcclxuICAgICAgICAucGlwZShsb2NhbENvbXBpbGVyUHJvamVjdCgpKVxyXG4gICAgICAgIC5waXBlKHByZXBlbmRDb3B5cmlnaHQoKSlcclxuICAgICAgICAucGlwZShzb3VyY2VtYXBzLndyaXRlKFwiLlwiKSlcclxuICAgICAgICAucGlwZShndWxwLmRlc3QoXCIuXCIpKTtcclxufSk7XHJcblxyXG5ndWxwLnRhc2soc2VydmljZXNGaWxlLCBmYWxzZSwgW1wibGliXCIsIFwiZ2VuZXJhdGUtZGlhZ25vc3RpY3NcIl0sICgpID0+IHtcclxuICAgIGNvbnN0IHNlcnZpY2VzUHJvamVjdCA9IHRzYy5jcmVhdGVQcm9qZWN0KFwic3JjL3NlcnZpY2VzL3RzY29uZmlnLmpzb25cIiwgZ2V0Q29tcGlsZXJTZXR0aW5ncyh7IHJlbW92ZUNvbW1lbnRzOiBmYWxzZSB9LCAvKnVzZUJ1aWx0Q29tcGlsZXIqL2ZhbHNlKSk7XHJcbiAgICBjb25zdCB7anMsIGR0c30gPSBzZXJ2aWNlc1Byb2plY3Quc3JjKClcclxuICAgICAgICAucGlwZShuZXdlcihzZXJ2aWNlc0ZpbGUpKVxyXG4gICAgICAgIC5waXBlKHNvdXJjZW1hcHMuaW5pdCgpKVxyXG4gICAgICAgIC5waXBlKHNlcnZpY2VzUHJvamVjdCgpKTtcclxuICAgIGNvbnN0IGNvbXBsZXRlZEpzID0ganMucGlwZShwcmVwZW5kQ29weXJpZ2h0KCkpXHJcbiAgICAgICAgLnBpcGUoc291cmNlbWFwcy53cml0ZShcIi5cIikpO1xyXG4gICAgY29uc3QgY29tcGxldGVkRHRzID0gZHRzLnBpcGUocHJlcGVuZENvcHlyaWdodCgvKm91dHB1dENvcHlyaWdodCovdHJ1ZSkpXHJcbiAgICAgICAgLnBpcGUoaW5zZXJ0LnRyYW5zZm9ybSgoY29udGVudHMsIGZpbGUpID0+IHtcclxuICAgICAgICAgICAgZmlsZS5wYXRoID0gc3RhbmRhbG9uZURlZmluaXRpb25zRmlsZTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnRzLnJlcGxhY2UoL14oXFxzKikoZXhwb3J0ICk/Y29uc3QgZW51bSAoXFxTKykgeyhcXHMqKSQvZ20sIFwiJDEkMmVudW0gJDMgeyQ0XCIpO1xyXG4gICAgICAgIH0pKTtcclxuICAgIHJldHVybiBtZXJnZTIoW1xyXG4gICAgICAgIGNvbXBsZXRlZEpzLFxyXG4gICAgICAgIGNvbXBsZXRlZEpzLnBpcGUoY2xvbmUoKSlcclxuICAgICAgICAgICAgLnBpcGUoaW5zZXJ0LnRyYW5zZm9ybSgoY29udGVudCwgZmlsZSkgPT4gKGZpbGUucGF0aCA9IG5vZGVQYWNrYWdlRmlsZSwgY29udGVudCkpKSxcclxuICAgICAgICBjb21wbGV0ZWREdHMsXHJcbiAgICAgICAgY29tcGxldGVkRHRzLnBpcGUoY2xvbmUoKSlcclxuICAgICAgICAgICAgLnBpcGUoaW5zZXJ0LnRyYW5zZm9ybSgoY29udGVudCwgZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZmlsZS5wYXRoID0gbm9kZURlZmluaXRpb25zRmlsZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50ICsgXCJcXHJcXG5leHBvcnQgPSB0cztcIjtcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgIC5waXBlKGd1bHAuZGVzdChcIi5cIikpLFxyXG4gICAgICAgIGNvbXBsZXRlZER0cy5waXBlKGNsb25lKCkpXHJcbiAgICAgICAgICAgIC5waXBlKGluc2VydC50cmFuc2Zvcm0oKGNvbnRlbnQsIGZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGZpbGUucGF0aCA9IG5vZGVTdGFuZGFsb25lRGVmaW5pdGlvbnNGaWxlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQucmVwbGFjZSgvZGVjbGFyZSAobmFtZXNwYWNlfG1vZHVsZSkgdHMvZywgJ2RlY2xhcmUgbW9kdWxlIFwidHlwZXNjcmlwdFwiJyk7XHJcbiAgICAgICAgICAgIH0pKVxyXG4gICAgXSkucGlwZShndWxwLmRlc3QoXCIuXCIpKTtcclxufSk7XHJcblxyXG4vLyBjYW5jZWxsYXRpb25Ub2tlbi5qc1xyXG5jb25zdCBjYW5jZWxsYXRpb25Ub2tlbkpzID0gcGF0aC5qb2luKGJ1aWx0TG9jYWxEaXJlY3RvcnksIFwiY2FuY2VsbGF0aW9uVG9rZW4uanNcIik7XHJcbmd1bHAudGFzayhjYW5jZWxsYXRpb25Ub2tlbkpzLCBmYWxzZSwgW3NlcnZpY2VzRmlsZV0sICgpID0+IHtcclxuICAgIGNvbnN0IGNhbmNlbGxhdGlvblRva2VuUHJvamVjdCA9IHRzYy5jcmVhdGVQcm9qZWN0KFwic3JjL3NlcnZlci9jYW5jZWxsYXRpb25Ub2tlbi90c2NvbmZpZy5qc29uXCIsIGdldENvbXBpbGVyU2V0dGluZ3Moe30sIC8qdXNlQnVpbHRDb21waWxlciovdHJ1ZSkpO1xyXG4gICAgcmV0dXJuIGNhbmNlbGxhdGlvblRva2VuUHJvamVjdC5zcmMoKVxyXG4gICAgICAgIC5waXBlKG5ld2VyKGNhbmNlbGxhdGlvblRva2VuSnMpKVxyXG4gICAgICAgIC5waXBlKHNvdXJjZW1hcHMuaW5pdCgpKVxyXG4gICAgICAgIC5waXBlKGNhbmNlbGxhdGlvblRva2VuUHJvamVjdCgpKVxyXG4gICAgICAgIC5waXBlKHByZXBlbmRDb3B5cmlnaHQoKSlcclxuICAgICAgICAucGlwZShzb3VyY2VtYXBzLndyaXRlKFwiLlwiKSlcclxuICAgICAgICAucGlwZShndWxwLmRlc3QoYnVpbHRMb2NhbERpcmVjdG9yeSkpO1xyXG59KTtcclxuXHJcbi8vIHR5cGluZ3NJbnN0YWxsZXJGaWxlLmpzXHJcbmNvbnN0IHR5cGluZ3NJbnN0YWxsZXJKcyA9IHBhdGguam9pbihidWlsdExvY2FsRGlyZWN0b3J5LCBcInR5cGluZ3NJbnN0YWxsZXIuanNcIik7XHJcbmd1bHAudGFzayh0eXBpbmdzSW5zdGFsbGVySnMsIGZhbHNlLCBbc2VydmljZXNGaWxlXSwgKCkgPT4ge1xyXG4gICAgY29uc3QgY2FuY2VsbGF0aW9uVG9rZW5Qcm9qZWN0ID0gdHNjLmNyZWF0ZVByb2plY3QoXCJzcmMvc2VydmVyL3R5cGluZ3NJbnN0YWxsZXIvdHNjb25maWcuanNvblwiLCBnZXRDb21waWxlclNldHRpbmdzKHt9LCAvKnVzZUJ1aWx0Q29tcGlsZXIqL3RydWUpKTtcclxuICAgIHJldHVybiBjYW5jZWxsYXRpb25Ub2tlblByb2plY3Quc3JjKClcclxuICAgICAgICAucGlwZShuZXdlcih0eXBpbmdzSW5zdGFsbGVySnMpKVxyXG4gICAgICAgIC5waXBlKHNvdXJjZW1hcHMuaW5pdCgpKVxyXG4gICAgICAgIC5waXBlKGNhbmNlbGxhdGlvblRva2VuUHJvamVjdCgpKVxyXG4gICAgICAgIC5waXBlKHByZXBlbmRDb3B5cmlnaHQoKSlcclxuICAgICAgICAucGlwZShzb3VyY2VtYXBzLndyaXRlKFwiLlwiKSlcclxuICAgICAgICAucGlwZShndWxwLmRlc3QoXCIuXCIpKTtcclxufSk7XHJcblxyXG5jb25zdCBzZXJ2ZXJGaWxlID0gcGF0aC5qb2luKGJ1aWx0TG9jYWxEaXJlY3RvcnksIFwidHNzZXJ2ZXIuanNcIik7XHJcblxyXG5ndWxwLnRhc2soc2VydmVyRmlsZSwgZmFsc2UsIFtzZXJ2aWNlc0ZpbGUsIHR5cGluZ3NJbnN0YWxsZXJKcywgY2FuY2VsbGF0aW9uVG9rZW5Kc10sICgpID0+IHtcclxuICAgIGNvbnN0IHNlcnZlclByb2plY3QgPSB0c2MuY3JlYXRlUHJvamVjdChcInNyYy9zZXJ2ZXIvdHNjb25maWcuanNvblwiLCBnZXRDb21waWxlclNldHRpbmdzKHt9LCAvKnVzZUJ1aWx0Q29tcGlsZXIqL3RydWUpKTtcclxuICAgIHJldHVybiBzZXJ2ZXJQcm9qZWN0LnNyYygpXHJcbiAgICAgICAgLnBpcGUobmV3ZXIoc2VydmVyRmlsZSkpXHJcbiAgICAgICAgLnBpcGUoc291cmNlbWFwcy5pbml0KCkpXHJcbiAgICAgICAgLnBpcGUoc2VydmVyUHJvamVjdCgpKVxyXG4gICAgICAgIC5waXBlKHByZXBlbmRDb3B5cmlnaHQoKSlcclxuICAgICAgICAucGlwZShzb3VyY2VtYXBzLndyaXRlKFwiLlwiKSlcclxuICAgICAgICAucGlwZShndWxwLmRlc3QoXCIuXCIpKTtcclxufSk7XHJcblxyXG5jb25zdCB0c3NlcnZlckxpYnJhcnlGaWxlID0gcGF0aC5qb2luKGJ1aWx0TG9jYWxEaXJlY3RvcnksIFwidHNzZXJ2ZXJsaWJyYXJ5LmpzXCIpO1xyXG5jb25zdCB0c3NlcnZlckxpYnJhcnlEZWZpbml0aW9uRmlsZSA9IHBhdGguam9pbihidWlsdExvY2FsRGlyZWN0b3J5LCBcInRzc2VydmVybGlicmFyeS5kLnRzXCIpO1xyXG5cclxuZ3VscC50YXNrKHRzc2VydmVyTGlicmFyeUZpbGUsIGZhbHNlLCBbc2VydmljZXNGaWxlXSwgKGRvbmUpID0+IHtcclxuICAgIGNvbnN0IHNlcnZlckxpYnJhcnlQcm9qZWN0ID0gdHNjLmNyZWF0ZVByb2plY3QoXCJzcmMvc2VydmVyL3RzY29uZmlnLmxpYnJhcnkuanNvblwiLCBnZXRDb21waWxlclNldHRpbmdzKHt9LCAvKnVzZUJ1aWx0Q29tcGlsZXIqLyB0cnVlKSk7XHJcbiAgICBjb25zdCB7anMsIGR0c306IHsganM6IE5vZGVKUy5SZWFkYWJsZVN0cmVhbSwgZHRzOiBOb2RlSlMuUmVhZGFibGVTdHJlYW0gfSA9IHNlcnZlckxpYnJhcnlQcm9qZWN0LnNyYygpXHJcbiAgICAgICAgLnBpcGUoc291cmNlbWFwcy5pbml0KCkpXHJcbiAgICAgICAgLnBpcGUobmV3ZXIodHNzZXJ2ZXJMaWJyYXJ5RmlsZSkpXHJcbiAgICAgICAgLnBpcGUoc2VydmVyTGlicmFyeVByb2plY3QoKSk7XHJcblxyXG4gICAgcmV0dXJuIG1lcmdlMihbXHJcbiAgICAgICAganMucGlwZShwcmVwZW5kQ29weXJpZ2h0KCkpXHJcbiAgICAgICAgICAgIC5waXBlKHNvdXJjZW1hcHMud3JpdGUoXCIuXCIpKVxyXG4gICAgICAgICAgICAucGlwZShndWxwLmRlc3QoXCIuXCIpKSxcclxuICAgICAgICBkdHMucGlwZShwcmVwZW5kQ29weXJpZ2h0KCkpXHJcbiAgICAgICAgICAgIC5waXBlKGd1bHAuZGVzdChcIi5cIikpXHJcbiAgICBdKTtcclxufSk7XHJcblxyXG5ndWxwLnRhc2soXCJsc3NsXCIsIFwiQnVpbGRzIGxhbmd1YWdlIHNlcnZpY2Ugc2VydmVyIGxpYnJhcnlcIiwgW3Rzc2VydmVyTGlicmFyeUZpbGVdKTtcclxuZ3VscC50YXNrKFwibG9jYWxcIiwgXCJCdWlsZHMgdGhlIGZ1bGwgY29tcGlsZXIgYW5kIHNlcnZpY2VzXCIsIFtidWlsdExvY2FsQ29tcGlsZXIsIHNlcnZpY2VzRmlsZSwgc2VydmVyRmlsZSwgYnVpbHRHZW5lcmF0ZWREaWFnbm9zdGljTWVzc2FnZXNKU09OLCB0c3NlcnZlckxpYnJhcnlGaWxlXSk7XHJcbmd1bHAudGFzayhcInRzY1wiLCBcIkJ1aWxkcyBvbmx5IHRoZSBjb21waWxlclwiLCBbYnVpbHRMb2NhbENvbXBpbGVyXSk7XHJcblxyXG4vLyBHZW5lcmF0ZSBNYXJrZG93biBzcGVjXHJcbmNvbnN0IHdvcmQybWRKcyA9IHBhdGguam9pbihzY3JpcHRzRGlyZWN0b3J5LCBcIndvcmQybWQuanNcIik7XHJcbmNvbnN0IHdvcmQybWRUcyA9IHBhdGguam9pbihzY3JpcHRzRGlyZWN0b3J5LCBcIndvcmQybWQudHNcIik7XHJcbmNvbnN0IHNwZWNXb3JkID0gcGF0aC5qb2luKGRvY0RpcmVjdG9yeSwgXCJUeXBlU2NyaXB0IExhbmd1YWdlIFNwZWNpZmljYXRpb24uZG9jeFwiKTtcclxuY29uc3Qgc3BlY01kID0gcGF0aC5qb2luKGRvY0RpcmVjdG9yeSwgXCJzcGVjLm1kXCIpO1xyXG5cclxuZ3VscC50YXNrKHdvcmQybWRKcywgZmFsc2UsIFtdLCAoKSA9PiB7XHJcbiAgICBjb25zdCBzZXR0aW5nczogdHNjLlNldHRpbmdzID0gZ2V0Q29tcGlsZXJTZXR0aW5ncyh7XHJcbiAgICAgICAgb3V0RmlsZTogd29yZDJtZEpzXHJcbiAgICB9LCAvKnVzZUJ1aWx0Q29tcGlsZXIqLyBmYWxzZSk7XHJcbiAgICByZXR1cm4gZ3VscC5zcmMod29yZDJtZFRzKVxyXG4gICAgICAgIC5waXBlKG5ld2VyKHdvcmQybWRKcykpXHJcbiAgICAgICAgLnBpcGUoc291cmNlbWFwcy5pbml0KCkpXHJcbiAgICAgICAgLnBpcGUodHNjKHNldHRpbmdzKSlcclxuICAgICAgICAucGlwZShzb3VyY2VtYXBzLndyaXRlKFwiLlwiKSlcclxuICAgICAgICAucGlwZShndWxwLmRlc3QoXCIuXCIpKTtcclxufSk7XHJcblxyXG5ndWxwLnRhc2soc3BlY01kLCBmYWxzZSwgW3dvcmQybWRKc10sIChkb25lKSA9PiB7XHJcbiAgICBjb25zdCBzcGVjV29yZEZ1bGxQYXRoID0gcGF0aC5yZXNvbHZlKHNwZWNXb3JkKTtcclxuICAgIGNvbnN0IHNwZWNNREZ1bGxQYXRoID0gcGF0aC5yZXNvbHZlKHNwZWNNZCk7XHJcbiAgICBjb25zdCBjbWQgPSBcImNzY3JpcHQgLy9ub2xvZ28gXCIgKyB3b3JkMm1kSnMgKyBcIiBcXFwiXCIgKyBzcGVjV29yZEZ1bGxQYXRoICsgXCJcXFwiIFwiICsgXCJcXFwiXCIgKyBzcGVjTURGdWxsUGF0aCArIFwiXFxcIlwiO1xyXG4gICAgY29uc29sZS5sb2coY21kKTtcclxuICAgIGNwLmV4ZWMoY21kLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBkb25lKCk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5ndWxwLnRhc2soXCJnZW5lcmF0ZS1zcGVjXCIsIFwiR2VuZXJhdGVzIGEgTWFya2Rvd24gdmVyc2lvbiBvZiB0aGUgTGFuZ3VhZ2UgU3BlY2lmaWNhdGlvblwiLCBbc3BlY01kXSk7XHJcblxyXG5ndWxwLnRhc2soXCJjbGVhblwiLCBcIkNsZWFucyB0aGUgY29tcGlsZXIgb3V0cHV0LCBkZWNsYXJlIGZpbGVzLCBhbmQgdGVzdHNcIiwgW10sICgpID0+IHtcclxuICAgIHJldHVybiBkZWwoW2J1aWx0RGlyZWN0b3J5XSk7XHJcbn0pO1xyXG5cclxuZ3VscC50YXNrKFwidXNlRGVidWdNb2RlXCIsIGZhbHNlLCBbXSwgKGRvbmUpID0+IHsgdXNlRGVidWdNb2RlID0gdHJ1ZTsgZG9uZSgpOyB9KTtcclxuZ3VscC50YXNrKFwiZG9udFVzZURlYnVnTW9kZVwiLCBmYWxzZSwgW10sIChkb25lKSA9PiB7IHVzZURlYnVnTW9kZSA9IGZhbHNlOyBkb25lKCk7IH0pO1xyXG5cclxuZ3VscC50YXNrKFwiVmVyaWZ5TEtHXCIsIGZhbHNlLCBbXSwgKCkgPT4ge1xyXG4gICAgY29uc3QgZXhwZWN0ZWRGaWxlcyA9IFtidWlsdExvY2FsQ29tcGlsZXIsIHNlcnZpY2VzRmlsZSwgc2VydmVyRmlsZSwgbm9kZVBhY2thZ2VGaWxlLCBub2RlRGVmaW5pdGlvbnNGaWxlLCBzdGFuZGFsb25lRGVmaW5pdGlvbnNGaWxlLCB0c3NlcnZlckxpYnJhcnlGaWxlLCB0c3NlcnZlckxpYnJhcnlEZWZpbml0aW9uRmlsZSwgdHlwaW5nc0luc3RhbGxlckpzLCBjYW5jZWxsYXRpb25Ub2tlbkpzXS5jb25jYXQobGlicmFyeVRhcmdldHMpO1xyXG4gICAgY29uc3QgbWlzc2luZ0ZpbGVzID0gZXhwZWN0ZWRGaWxlcy5maWx0ZXIoZnVuY3Rpb24oZikge1xyXG4gICAgICAgIHJldHVybiAhZnMuZXhpc3RzU3luYyhmKTtcclxuICAgIH0pO1xyXG4gICAgaWYgKG1pc3NpbmdGaWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHJlcGxhY2UgdGhlIExLRyB1bmxlc3MgYWxsIGJ1aWx0IHRhcmdldHMgYXJlIHByZXNlbnQgaW4gZGlyZWN0b3J5IFwiICsgYnVpbHRMb2NhbERpcmVjdG9yeSArXHJcbiAgICAgICAgICAgIFwiLiBUaGUgZm9sbG93aW5nIGZpbGVzIGFyZSBtaXNzaW5nOlxcblwiICsgbWlzc2luZ0ZpbGVzLmpvaW4oXCJcXG5cIikpO1xyXG4gICAgfVxyXG4gICAgLy8gQ29weSBhbGwgdGhlIHRhcmdldHMgaW50byB0aGUgTEtHIGRpcmVjdG9yeVxyXG4gICAgcmV0dXJuIGd1bHAuc3JjKGV4cGVjdGVkRmlsZXMpLnBpcGUoZ3VscC5kZXN0KExLR0RpcmVjdG9yeSkpO1xyXG59KTtcclxuXHJcbmd1bHAudGFzayhcIkxLR0ludGVybmFsXCIsIGZhbHNlLCBbXCJsaWJcIiwgXCJsb2NhbFwiXSk7XHJcblxyXG5ndWxwLnRhc2soXCJMS0dcIiwgXCJNYWtlcyBhIG5ldyBMS0cgb3V0IG9mIHRoZSBidWlsdCBqcyBmaWxlc1wiLCBbXCJjbGVhblwiLCBcImRvbnRVc2VEZWJ1Z01vZGVcIl0sICgpID0+IHtcclxuICAgIHJldHVybiBydW5TZXF1ZW5jZShcIkxLR0ludGVybmFsXCIsIFwiVmVyaWZ5TEtHXCIpO1xyXG59KTtcclxuXHJcblxyXG4vLyBUYXNrIHRvIGJ1aWxkIHRoZSB0ZXN0cyBpbmZyYXN0cnVjdHVyZSB1c2luZyB0aGUgYnVpbHQgY29tcGlsZXJcclxuY29uc3QgcnVuID0gcGF0aC5qb2luKGJ1aWx0TG9jYWxEaXJlY3RvcnksIFwicnVuLmpzXCIpO1xyXG5ndWxwLnRhc2socnVuLCBmYWxzZSwgW3NlcnZpY2VzRmlsZV0sICgpID0+IHtcclxuICAgIGNvbnN0IHRlc3RQcm9qZWN0ID0gdHNjLmNyZWF0ZVByb2plY3QoXCJzcmMvaGFybmVzcy90c2NvbmZpZy5qc29uXCIsIGdldENvbXBpbGVyU2V0dGluZ3Moe30sIC8qdXNlQnVpbHRDb21waWxlciovdHJ1ZSkpO1xyXG4gICAgcmV0dXJuIHRlc3RQcm9qZWN0LnNyYygpXHJcbiAgICAgICAgLnBpcGUobmV3ZXIocnVuKSlcclxuICAgICAgICAucGlwZShzb3VyY2VtYXBzLmluaXQoKSlcclxuICAgICAgICAucGlwZSh0ZXN0UHJvamVjdCgpKVxyXG4gICAgICAgIC5waXBlKHNvdXJjZW1hcHMud3JpdGUoXCIuXCIsIHsgaW5jbHVkZUNvbnRlbnQ6IGZhbHNlLCBzb3VyY2VSb290OiBcIi4uLy4uL1wiIH0pKVxyXG4gICAgICAgIC5waXBlKGd1bHAuZGVzdChcIi5cIikpO1xyXG59KTtcclxuXHJcbmNvbnN0IGludGVybmFsVGVzdHMgPSBcImludGVybmFsL1wiO1xyXG5cclxuY29uc3QgbG9jYWxCYXNlbGluZSA9IFwidGVzdHMvYmFzZWxpbmVzL2xvY2FsL1wiO1xyXG5jb25zdCByZWZCYXNlbGluZSA9IFwidGVzdHMvYmFzZWxpbmVzL3JlZmVyZW5jZS9cIjtcclxuXHJcbmNvbnN0IGxvY2FsUndjQmFzZWxpbmUgPSBwYXRoLmpvaW4oaW50ZXJuYWxUZXN0cywgXCJiYXNlbGluZXMvcndjL2xvY2FsXCIpO1xyXG5jb25zdCByZWZSd2NCYXNlbGluZSA9IHBhdGguam9pbihpbnRlcm5hbFRlc3RzLCBcImJhc2VsaW5lcy9yd2MvcmVmZXJlbmNlXCIpO1xyXG5cclxuY29uc3QgbG9jYWxUZXN0MjYyQmFzZWxpbmUgPSBwYXRoLmpvaW4oaW50ZXJuYWxUZXN0cywgXCJiYXNlbGluZXMvdGVzdDI2Mi9sb2NhbFwiKTtcclxuXHJcbmd1bHAudGFzayhcInRlc3RzXCIsIFwiQnVpbGRzIHRoZSB0ZXN0IGluZnJhc3RydWN0dXJlIHVzaW5nIHRoZSBidWlsdCBjb21waWxlclwiLCBbcnVuXSk7XHJcbmd1bHAudGFzayhcInRlc3RzLWRlYnVnXCIsIFwiQnVpbGRzIHRoZSB0ZXN0IHNvdXJjZXMgYW5kIGF1dG9tYXRpb24gaW4gZGVidWcgbW9kZVwiLCAoKSA9PiB7XHJcbiAgICByZXR1cm4gcnVuU2VxdWVuY2UoXCJ1c2VEZWJ1Z01vZGVcIiwgXCJ0ZXN0c1wiKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBkZWxldGVUZW1wb3JhcnlQcm9qZWN0T3V0cHV0KCkge1xyXG4gICAgcmV0dXJuIGRlbChwYXRoLmpvaW4obG9jYWxCYXNlbGluZSwgXCJwcm9qZWN0T3V0cHV0L1wiKSk7XHJcbn1cclxuXHJcbmxldCBzYXZlZE5vZGVFbnY6IHN0cmluZztcclxuZnVuY3Rpb24gc2V0Tm9kZUVudlRvRGV2ZWxvcG1lbnQoKSB7XHJcbiAgICBzYXZlZE5vZGVFbnYgPSBwcm9jZXNzLmVudi5OT0RFX0VOVjtcclxuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WID0gXCJkZXZlbG9wbWVudFwiO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXN0b3JlU2F2ZWROb2RlRW52KCkge1xyXG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSBzYXZlZE5vZGVFbnY7XHJcbn1cclxuXHJcbmxldCB0ZXN0VGltZW91dCA9IDQwMDAwO1xyXG5mdW5jdGlvbiBydW5Db25zb2xlVGVzdHMoZGVmYXVsdFJlcG9ydGVyOiBzdHJpbmcsIHJ1bkluUGFyYWxsZWw6IGJvb2xlYW4sIGRvbmU6IChlPzogYW55KSA9PiB2b2lkKSB7XHJcbiAgICBjb25zdCBsaW50RmxhZyA9IGNtZExpbmVPcHRpb25zW1wibGludFwiXTtcclxuICAgIGNsZWFuVGVzdERpcnMoKGVycikgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihlcnIpOyBmYWlsV2l0aFN0YXR1cyhlcnIsIDEpOyB9XHJcbiAgICAgICAgY29uc3QgZGVidWcgPSBjbWRMaW5lT3B0aW9uc1tcImRlYnVnXCJdO1xyXG4gICAgICAgIGNvbnN0IHRlc3RzID0gY21kTGluZU9wdGlvbnNbXCJ0ZXN0c1wiXTtcclxuICAgICAgICBjb25zdCBsaWdodCA9IGNtZExpbmVPcHRpb25zW1wibGlnaHRcIl07XHJcbiAgICAgICAgY29uc3Qgc3RhY2tUcmFjZUxpbWl0ID0gY21kTGluZU9wdGlvbnNbXCJzdGFja1RyYWNlTGltaXRcIl07XHJcbiAgICAgICAgY29uc3QgdGVzdENvbmZpZ0ZpbGUgPSBcInRlc3QuY29uZmlnXCI7XHJcbiAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmModGVzdENvbmZpZ0ZpbGUpKSB7XHJcbiAgICAgICAgICAgIGZzLnVubGlua1N5bmModGVzdENvbmZpZ0ZpbGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgd29ya2VyQ291bnQsIHRhc2tDb25maWdzRm9sZGVyO1xyXG4gICAgICAgIGlmIChydW5JblBhcmFsbGVsKSB7XHJcbiAgICAgICAgICAgIC8vIGdlbmVyYXRlIG5hbWUgdG8gc3RvcmUgdGFzayBjb25maWd1cmF0aW9uIGZpbGVzXHJcbiAgICAgICAgICAgIGNvbnN0IHByZWZpeCA9IG9zLnRtcGRpcigpICsgXCIvdHMtdGVzdHNcIjtcclxuICAgICAgICAgICAgbGV0IGkgPSAxO1xyXG4gICAgICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgICAgICB0YXNrQ29uZmlnc0ZvbGRlciA9IHByZWZpeCArIGk7XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH0gd2hpbGUgKGZzLmV4aXN0c1N5bmModGFza0NvbmZpZ3NGb2xkZXIpKTtcclxuICAgICAgICAgICAgZnMubWtkaXJTeW5jKHRhc2tDb25maWdzRm9sZGVyKTtcclxuXHJcbiAgICAgICAgICAgIHdvcmtlckNvdW50ID0gcHJvY2Vzcy5lbnYud29ya2VyQ291bnQgfHwgb3MuY3B1cygpLmxlbmd0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0ZXN0cyB8fCBsaWdodCB8fCB0YXNrQ29uZmlnc0ZvbGRlcikge1xyXG4gICAgICAgICAgICB3cml0ZVRlc3RDb25maWdGaWxlKHRlc3RzLCBsaWdodCwgdGFza0NvbmZpZ3NGb2xkZXIsIHdvcmtlckNvdW50LCBzdGFja1RyYWNlTGltaXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRlc3RzICYmIHRlc3RzLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IFwicndjXCIpIHtcclxuICAgICAgICAgICAgdGVzdFRpbWVvdXQgPSA0MDAwMDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjb2xvcnMgPSBjbWRMaW5lT3B0aW9uc1tcImNvbG9yc1wiXTtcclxuICAgICAgICBjb25zdCByZXBvcnRlciA9IGNtZExpbmVPcHRpb25zW1wicmVwb3J0ZXJcIl0gfHwgZGVmYXVsdFJlcG9ydGVyO1xyXG5cclxuICAgICAgICAvLyB0aW1lb3V0IG5vcm1hbGx5IGlzblwidCBuZWNlc3NhcnkgYnV0IFRyYXZpcy1DSSBoYXMgYmVlbiB0aW1pbmcgb3V0IG9uIGNvbXBpbGVyIGJhc2VsaW5lcyBvY2Nhc2lvbmFsbHlcclxuICAgICAgICAvLyBkZWZhdWx0IHRpbWVvdXQgaXMgMnNlYyB3aGljaCByZWFsbHkgc2hvdWxkIGJlIGVub3VnaCwgYnV0IG1heWJlIHdlIGp1c3QgbmVlZCBhIHNtYWxsIGFtb3VudCBsb25nZXJcclxuICAgICAgICBpZiAoIXJ1bkluUGFyYWxsZWwpIHtcclxuICAgICAgICAgICAgY29uc3QgYXJncyA9IFtdO1xyXG4gICAgICAgICAgICBpZiAoZGVidWcpIHtcclxuICAgICAgICAgICAgICAgIGFyZ3MucHVzaChcIi0tZGVidWctYnJrXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFyZ3MucHVzaChcIi1SXCIsIHJlcG9ydGVyKTtcclxuICAgICAgICAgICAgaWYgKHRlc3RzKSB7XHJcbiAgICAgICAgICAgICAgICBhcmdzLnB1c2goXCItZ1wiLCBgXCIke3Rlc3RzfVwiYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbG9ycykge1xyXG4gICAgICAgICAgICAgICAgYXJncy5wdXNoKFwiLS1jb2xvcnNcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhcmdzLnB1c2goXCItLW5vLWNvbG9yc1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhcmdzLnB1c2goXCItdFwiLCB0ZXN0VGltZW91dCk7XHJcbiAgICAgICAgICAgIGFyZ3MucHVzaChydW4pO1xyXG4gICAgICAgICAgICBzZXROb2RlRW52VG9EZXZlbG9wbWVudCgpO1xyXG4gICAgICAgICAgICBleGVjKG1vY2hhLCBhcmdzLCBsaW50VGhlbkZpbmlzaCwgZnVuY3Rpb24oZSwgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICBmaW5pc2goZSwgc3RhdHVzKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gcnVuIHRhc2sgdG8gbG9hZCBhbGwgdGVzdHMgYW5kIHBhcnRpdGlvbiB0aGVtIGJldHdlZW4gd29ya2Vyc1xyXG4gICAgICAgICAgICBjb25zdCBhcmdzID0gW107XHJcbiAgICAgICAgICAgIGFyZ3MucHVzaChcIi1SXCIsIFwibWluXCIpO1xyXG4gICAgICAgICAgICBpZiAoY29sb3JzKSB7XHJcbiAgICAgICAgICAgICAgICBhcmdzLnB1c2goXCItLWNvbG9yc1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFyZ3MucHVzaChcIi0tbm8tY29sb3JzXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFyZ3MucHVzaChydW4pO1xyXG4gICAgICAgICAgICBzZXROb2RlRW52VG9EZXZlbG9wbWVudCgpO1xyXG4gICAgICAgICAgICBydW5UZXN0c0luUGFyYWxsZWwodGFza0NvbmZpZ3NGb2xkZXIsIHJ1biwgeyB0ZXN0VGltZW91dDogdGVzdFRpbWVvdXQsIG5vQ29sb3JzOiBjb2xvcnMgPT09IFwiIC0tbm8tY29sb3JzIFwiIH0sIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgLy8gbGFzdCB3b3JrZXIgY2xlYW4gZXZlcnl0aGluZyBhbmQgcnVucyBsaW50ZXIgaW4gY2FzZSBpZiB0aGVyZSB3ZXJlIG5vIGVycm9yc1xyXG4gICAgICAgICAgICAgICAgZGVsKHRhc2tDb25maWdzRm9sZGVyKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW50VGhlbkZpbmlzaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmluaXNoKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIGZhaWxXaXRoU3RhdHVzKGVycj86IGFueSwgc3RhdHVzPzogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkb25lKGVyciB8fCBzdGF0dXMpO1xyXG4gICAgICAgIHByb2Nlc3MuZXhpdChzdGF0dXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGxpbnRUaGVuRmluaXNoKCkge1xyXG4gICAgICAgIGlmIChsaW50RmxhZykge1xyXG4gICAgICAgICAgICBydW5TZXF1ZW5jZShcImxpbnRcIiwgZmluaXNoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZpbmlzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBmaW5pc2goZXJyb3I/OiBhbnksIGVycm9yU3RhdHVzPzogbnVtYmVyKSB7XHJcbiAgICAgICAgcmVzdG9yZVNhdmVkTm9kZUVudigpO1xyXG4gICAgICAgIGRlbGV0ZVRlbXBvcmFyeVByb2plY3RPdXRwdXQoKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVycm9yICE9PSB1bmRlZmluZWQgfHwgZXJyb3JTdGF0dXMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgZmFpbFdpdGhTdGF0dXMoZXJyb3IsIGVycm9yU3RhdHVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRvbmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5ndWxwLnRhc2soXCJydW50ZXN0cy1wYXJhbGxlbFwiLCBcIlJ1bnMgYWxsIHRoZSB0ZXN0cyBpbiBwYXJhbGxlbCB1c2luZyB0aGUgYnVpbHQgcnVuLmpzIGZpbGUuIE9wdGlvbmFsIGFyZ3VtZW50cyBhcmU6IC0tdFtlc3RzXT1jYXRlZ29yeTF8Y2F0ZWdvcnkyfC4uLiAtLWRbZWJ1Z109dHJ1ZS5cIiwgW1wiYnVpbGQtcnVsZXNcIiwgXCJ0ZXN0c1wiXSwgKGRvbmUpID0+IHtcclxuICAgIHJ1bkNvbnNvbGVUZXN0cyhcIm1pblwiLCAvKnJ1bkluUGFyYWxsZWwqLyB0cnVlLCBkb25lKTtcclxufSk7XHJcbmd1bHAudGFzayhcInJ1bnRlc3RzXCIsXHJcbiAgICBcIlJ1bnMgdGhlIHRlc3RzIHVzaW5nIHRoZSBidWlsdCBydW4uanMgZmlsZS4gT3B0aW9uYWwgYXJndW1lbnRzIGFyZTogLS10W2VzdHNdPXJlZ2V4IC0tcltlcG9ydGVyXT1bbGlzdHxzcGVjfGpzb258PG1vcmU+XSAtLWRbZWJ1Z109dHJ1ZSAtLWNvbG9yW3NdPWZhbHNlIC0tbGludD10cnVlLlwiLFxyXG4gICAgW1wiYnVpbGQtcnVsZXNcIiwgXCJ0ZXN0c1wiXSxcclxuICAgIChkb25lKSA9PiB7XHJcbiAgICAgICAgcnVuQ29uc29sZVRlc3RzKFwibW9jaGEtZml2ZW1hdC1wcm9ncmVzcy1yZXBvcnRlclwiLCAvKnJ1bkluUGFyYWxsZWwqLyBmYWxzZSwgZG9uZSk7XHJcbiAgICB9KTtcclxuXHJcbmNvbnN0IG5vZGVTZXJ2ZXJPdXRGaWxlID0gXCJ0ZXN0cy93ZWJUZXN0U2VydmVyLmpzXCI7XHJcbmNvbnN0IG5vZGVTZXJ2ZXJJbkZpbGUgPSBcInRlc3RzL3dlYlRlc3RTZXJ2ZXIudHNcIjtcclxuZ3VscC50YXNrKG5vZGVTZXJ2ZXJPdXRGaWxlLCBmYWxzZSwgW3NlcnZpY2VzRmlsZV0sICgpID0+IHtcclxuICAgIGNvbnN0IHNldHRpbmdzOiB0c2MuU2V0dGluZ3MgPSBnZXRDb21waWxlclNldHRpbmdzKHsgbW9kdWxlOiBcImNvbW1vbmpzXCIgfSwgLyp1c2VCdWlsdENvbXBpbGVyKi8gdHJ1ZSk7XHJcbiAgICByZXR1cm4gZ3VscC5zcmMobm9kZVNlcnZlckluRmlsZSlcclxuICAgICAgICAucGlwZShuZXdlcihub2RlU2VydmVyT3V0RmlsZSkpXHJcbiAgICAgICAgLnBpcGUoc291cmNlbWFwcy5pbml0KCkpXHJcbiAgICAgICAgLnBpcGUodHNjKHNldHRpbmdzKSlcclxuICAgICAgICAucGlwZShzb3VyY2VtYXBzLndyaXRlKFwiLlwiKSlcclxuICAgICAgICAucGlwZShndWxwLmRlc3QocGF0aC5kaXJuYW1lKG5vZGVTZXJ2ZXJPdXRGaWxlKSkpO1xyXG59KTtcclxuXHJcbmltcG9ydCBjb252ZXJ0TWFwID0gcmVxdWlyZShcImNvbnZlcnQtc291cmNlLW1hcFwiKTtcclxuaW1wb3J0IHNvcmNlcnkgPSByZXF1aXJlKFwic29yY2VyeVwiKTtcclxuZGVjbGFyZSBtb2R1bGUgXCJjb252ZXJ0LXNvdXJjZS1tYXBcIiB7XHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZnJvbVNvdXJjZShzb3VyY2U6IHN0cmluZywgbGFyZ2VTb3VyY2U/OiBib29sZWFuKTogU291cmNlTWFwQ29udmVydGVyO1xyXG59XHJcblxyXG5ndWxwLnRhc2soXCJicm93c2VyaWZ5XCIsIFwiUnVucyBicm93c2VyaWZ5IG9uIHJ1bi5qcyB0byBwcm9kdWNlIGEgZmlsZSBzdWl0YWJsZSBmb3IgcnVubmluZyB0ZXN0cyBpbiB0aGUgYnJvd3NlclwiLCBbc2VydmljZXNGaWxlXSwgKGRvbmUpID0+IHtcclxuICAgIGNvbnN0IHRlc3RQcm9qZWN0ID0gdHNjLmNyZWF0ZVByb2plY3QoXCJzcmMvaGFybmVzcy90c2NvbmZpZy5qc29uXCIsIGdldENvbXBpbGVyU2V0dGluZ3MoeyBvdXRGaWxlOiBcIi4uLy4uL2J1aWx0L2xvY2FsL2J1bmRsZS5qc1wiIH0sIC8qdXNlQnVpbHRDb21waWxlciovIHRydWUpKTtcclxuICAgIHJldHVybiB0ZXN0UHJvamVjdC5zcmMoKVxyXG4gICAgICAgIC5waXBlKG5ld2VyKFwiYnVpbHQvbG9jYWwvYnVuZGxlLmpzXCIpKVxyXG4gICAgICAgIC5waXBlKHNvdXJjZW1hcHMuaW5pdCgpKVxyXG4gICAgICAgIC5waXBlKHRlc3RQcm9qZWN0KCkpXHJcbiAgICAgICAgLnBpcGUodGhyb3VnaDIub2JqKChmaWxlLCBlbmMsIG5leHQpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxNYXAgPSBmaWxlLnNvdXJjZU1hcDtcclxuICAgICAgICAgICAgY29uc3QgcHJlYnVuZGxlZENvbnRlbnQgPSBmaWxlLmNvbnRlbnRzLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIC8vIE1ha2UgcGF0aHMgYWJzb2x1dGUgdG8gaGVscCBzb3JjZXJ5IGRlYWwgd2l0aCBhbGwgdGhlIHRlcnJpYmxlIHBhdGhzIGJlaW5nIHRocm93biBhcm91bmRcclxuICAgICAgICAgICAgb3JpZ2luYWxNYXAuc291cmNlcyA9IG9yaWdpbmFsTWFwLnNvdXJjZXMubWFwKHMgPT4gcGF0aC5yZXNvbHZlKHMpKTtcclxuICAgICAgICAgICAgLy8gaW50b1N0cmVhbSAoYmVsb3cpIG1ha2VzIGJyb3dzZXJpZnkgdGhpbmsgdGhlIGlucHV0IGZpbGUgaXMgbmFtZWQgdGhpcywgc28gdGhpcyBpcyB3aGF0IGl0IHB1dHMgaW4gdGhlIHNvdXJjZW1hcFxyXG4gICAgICAgICAgICBvcmlnaW5hbE1hcC5maWxlID0gXCJidWlsdC9sb2NhbC9fc3RyZWFtXzAuanNcIjtcclxuXHJcbiAgICAgICAgICAgIGJyb3dzZXJpZnkoaW50b1N0cmVhbShmaWxlLmNvbnRlbnRzKSwgeyBkZWJ1ZzogdHJ1ZSB9KVxyXG4gICAgICAgICAgICAgICAgLmJ1bmRsZSgoZXJyLCByZXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhc3N1bWVzIGZpbGUuY29udGVudHMgaXMgYSBCdWZmZXJcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXBzID0gSlNPTi5wYXJzZShjb252ZXJ0TWFwLmZyb21Tb3VyY2UocmVzLnRvU3RyaW5nKCksIC8qbGFyZ2VTb3VyY2UqL3RydWUpLnRvSlNPTigpKTtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgbWFwcy5zb3VyY2VSb290O1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcHMuc291cmNlcyA9IG1hcHMuc291cmNlcy5tYXAocyA9PiBwYXRoLnJlc29sdmUocyA9PT0gXCJfc3RyZWFtXzAuanNcIiA/IFwiYnVpbHQvbG9jYWwvX3N0cmVhbV8wLmpzXCIgOiBzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU3RyaXAgYnJvd3NlcmlmeSdzIGlubGluZSBjb21tZW50cyBhd2F5IChjb3VsZCBwcm9iYWJseSBqdXN0IGxldCBzb3JjZXJ5IGRvIHRoaXMsIGJ1dCB0aGVuIHdlIGNvdWxkbid0IGZpeCB0aGUgcGF0aHMpXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZS5jb250ZW50cyA9IG5ldyBCdWZmZXIoY29udmVydE1hcC5yZW1vdmVDb21tZW50cyhyZXMudG9TdHJpbmcoKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYWluID0gc29yY2VyeS5sb2FkU3luYyhcImJ1aWx0L2xvY2FsL2J1bmRsZS5qc1wiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYnVpbHQvbG9jYWwvX3N0cmVhbV8wLmpzXCI6IHByZWJ1bmRsZWRDb250ZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJidWlsdC9sb2NhbC9idW5kbGUuanNcIjogZmlsZS5jb250ZW50cy50b1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZW1hcHM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYnVpbHQvbG9jYWwvX3N0cmVhbV8wLmpzXCI6IG9yaWdpbmFsTWFwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJidWlsdC9sb2NhbC9idW5kbGUuanNcIjogbWFwcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAtc3VwcG9ydC9zb3VyY2UtbWFwLXN1cHBvcnQuanNcIjogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBjaGFpbi5hcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUuc291cmNlTWFwID0gZmluYWxNYXA7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dCh1bmRlZmluZWQsIGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSkpXHJcbiAgICAgICAgLnBpcGUoc291cmNlbWFwcy53cml0ZShcIi5cIiwgeyBpbmNsdWRlQ29udGVudDogZmFsc2UgfSkpXHJcbiAgICAgICAgLnBpcGUoZ3VscC5kZXN0KFwiLlwiKSk7XHJcbn0pO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGNsZWFuVGVzdERpcnMoZG9uZTogKGU/OiBhbnkpID0+IHZvaWQpIHtcclxuICAgIC8vIENsZWFuIHRoZSBsb2NhbCBiYXNlbGluZXMgJiBSd2MgYmFzZWxpbmVzIGRpcmVjdG9yaWVzXHJcbiAgICBkZWwoW1xyXG4gICAgICAgIGxvY2FsQmFzZWxpbmUsXHJcbiAgICAgICAgbG9jYWxSd2NCYXNlbGluZSxcclxuICAgIF0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIG1rZGlyUChsb2NhbFJ3Y0Jhc2VsaW5lLCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIGRvbmUoZXJyKTtcclxuICAgICAgICAgICAgbWtkaXJQKGxvY2FsVGVzdDI2MkJhc2VsaW5lLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSBkb25lKGVycik7XHJcbiAgICAgICAgICAgICAgICBta2RpclAobG9jYWxCYXNlbGluZSwgKGVycikgPT4gZG9uZShlcnIpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gdXNlZCB0byBwYXNzIGRhdGEgZnJvbSBqYWtlIGNvbW1hbmQgbGluZSBkaXJlY3RseSB0byBydW4uanNcclxuZnVuY3Rpb24gd3JpdGVUZXN0Q29uZmlnRmlsZSh0ZXN0czogc3RyaW5nLCBsaWdodDogYm9vbGVhbiwgdGFza0NvbmZpZ3NGb2xkZXI/OiBzdHJpbmcsIHdvcmtlckNvdW50PzogbnVtYmVyLCBzdGFja1RyYWNlTGltaXQ/OiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHRlc3RDb25maWdDb250ZW50cyA9IEpTT04uc3RyaW5naWZ5KHsgdGVzdDogdGVzdHMgPyBbdGVzdHNdIDogdW5kZWZpbmVkLCBsaWdodCwgd29ya2VyQ291bnQsIHN0YWNrVHJhY2VMaW1pdCwgdGFza0NvbmZpZ3NGb2xkZXIgfSk7XHJcbiAgICBjb25zb2xlLmxvZyhcIlJ1bm5pbmcgdGVzdHMgd2l0aCBjb25maWc6IFwiICsgdGVzdENvbmZpZ0NvbnRlbnRzKTtcclxuICAgIGZzLndyaXRlRmlsZVN5bmMoXCJ0ZXN0LmNvbmZpZ1wiLCB0ZXN0Q29uZmlnQ29udGVudHMpO1xyXG59XHJcblxyXG5cclxuZ3VscC50YXNrKFwicnVudGVzdHMtYnJvd3NlclwiLCBcIlJ1bnMgdGhlIHRlc3RzIHVzaW5nIHRoZSBidWlsdCBydW4uanMgZmlsZSBsaWtlICdndWxwIHJ1bnRlc3RzJy4gU3ludGF4IGlzIGd1bHAgcnVudGVzdHMtYnJvd3Nlci4gQWRkaXRpb25hbCBvcHRpb25hbCBwYXJhbWV0ZXJzIC0tdGVzdHM9W3JlZ2V4XSwgLS1icm93c2VyPVtjaHJvbWV8SUVdXCIsIFtcImJyb3dzZXJpZnlcIiwgbm9kZVNlcnZlck91dEZpbGVdLCAoZG9uZSkgPT4ge1xyXG4gICAgY2xlYW5UZXN0RGlycygoZXJyKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikgeyBjb25zb2xlLmVycm9yKGVycik7IGRvbmUoZXJyKTsgcHJvY2Vzcy5leGl0KDEpOyB9XHJcbiAgICAgICAgaG9zdCA9IFwibm9kZVwiO1xyXG4gICAgICAgIGNvbnN0IHRlc3RzID0gY21kTGluZU9wdGlvbnNbXCJ0ZXN0c1wiXTtcclxuICAgICAgICBjb25zdCBsaWdodCA9IGNtZExpbmVPcHRpb25zW1wibGlnaHRcIl07XHJcbiAgICAgICAgY29uc3QgdGVzdENvbmZpZ0ZpbGUgPSBcInRlc3QuY29uZmlnXCI7XHJcbiAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmModGVzdENvbmZpZ0ZpbGUpKSB7XHJcbiAgICAgICAgICAgIGZzLnVubGlua1N5bmModGVzdENvbmZpZ0ZpbGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGVzdHMgfHwgbGlnaHQpIHtcclxuICAgICAgICAgICAgd3JpdGVUZXN0Q29uZmlnRmlsZSh0ZXN0cywgbGlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYXJncyA9IFtub2RlU2VydmVyT3V0RmlsZV07XHJcbiAgICAgICAgaWYgKGNtZExpbmVPcHRpb25zW1wiYnJvd3NlclwiXSkge1xyXG4gICAgICAgICAgICBhcmdzLnB1c2goY21kTGluZU9wdGlvbnNbXCJicm93c2VyXCJdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRlc3RzKSB7XHJcbiAgICAgICAgICAgIGFyZ3MucHVzaChKU09OLnN0cmluZ2lmeSh0ZXN0cykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBleGVjKGhvc3QsIGFyZ3MsIGRvbmUsIGRvbmUpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuZ3VscC50YXNrKFwiZ2VuZXJhdGUtY29kZS1jb3ZlcmFnZVwiLCBcIkdlbmVyYXRlcyBjb2RlIGNvdmVyYWdlIGRhdGEgdmlhIGlzdGFuYnVsXCIsIFtcInRlc3RzXCJdLCAoZG9uZSkgPT4ge1xyXG4gICAgZXhlYyhcImlzdGFuYnVsXCIsIFtcImNvdmVyXCIsIFwibm9kZV9tb2R1bGVzL21vY2hhL2Jpbi9fbW9jaGFcIiwgXCItLVwiLCBcIi1SXCIsIFwibWluXCIsIFwiLXRcIiwgdGVzdFRpbWVvdXQudG9TdHJpbmcoKSwgcnVuXSwgZG9uZSwgZG9uZSk7XHJcbn0pO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGdldERpZmZUb29sKCkge1xyXG4gICAgY29uc3QgcHJvZ3JhbSA9IHByb2Nlc3MuZW52W1wiRElGRlwiXTtcclxuICAgIGlmICghcHJvZ3JhbSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBZGQgdGhlICdESUZGJyBlbnZpcm9ubWVudCB2YXJpYWJsZSB0byB0aGUgcGF0aCBvZiB0aGUgcHJvZ3JhbSB5b3Ugd2FudCB0byB1c2UuXCIpO1xyXG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcm9ncmFtO1xyXG59XHJcblxyXG5ndWxwLnRhc2soXCJkaWZmXCIsIFwiRGlmZnMgdGhlIGNvbXBpbGVyIGJhc2VsaW5lcyB1c2luZyB0aGUgZGlmZiB0b29sIHNwZWNpZmllZCBieSB0aGUgJ0RJRkYnIGVudmlyb25tZW50IHZhcmlhYmxlXCIsIChkb25lKSA9PiB7XHJcbiAgICBleGVjKGdldERpZmZUb29sKCksIFtyZWZCYXNlbGluZSwgbG9jYWxCYXNlbGluZV0sIGRvbmUsIGRvbmUpO1xyXG59KTtcclxuZ3VscC50YXNrKFwiZGlmZi1yd2NcIiwgXCJEaWZmcyB0aGUgUldDIGJhc2VsaW5lcyB1c2luZyB0aGUgZGlmZiB0b29sIHNwZWNpZmllZCBieSB0aGUgJ0RJRkYnIGVudmlyb25tZW50IHZhcmlhYmxlXCIsIChkb25lKSA9PiB7XHJcbiAgICBleGVjKGdldERpZmZUb29sKCksIFtyZWZSd2NCYXNlbGluZSwgbG9jYWxSd2NCYXNlbGluZV0sIGRvbmUsIGRvbmUpO1xyXG59KTtcclxuXHJcbmd1bHAudGFzayhcImJhc2VsaW5lLWFjY2VwdFwiLCBcIk1ha2VzIHRoZSBtb3N0IHJlY2VudCB0ZXN0IHJlc3VsdHMgdGhlIG5ldyBiYXNlbGluZSwgb3ZlcndyaXRpbmcgdGhlIG9sZCBiYXNlbGluZVwiLCAoKSA9PiB7XHJcbiAgICByZXR1cm4gYmFzZWxpbmVBY2NlcHQoXCJcIik7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gYmFzZWxpbmVBY2NlcHQoc3ViZm9sZGVyID0gXCJcIikge1xyXG4gICAgcmV0dXJuIG1lcmdlMihiYXNlbGluZUNvcHkoc3ViZm9sZGVyKSwgYmFzZWxpbmVEZWxldGUoc3ViZm9sZGVyKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJhc2VsaW5lQ29weShzdWJmb2xkZXIgPSBcIlwiKSB7XHJcbiAgICByZXR1cm4gZ3VscC5zcmMoW2B0ZXN0cy9iYXNlbGluZXMvbG9jYWwvJHtzdWJmb2xkZXJ9LyoqYCwgYCF0ZXN0cy9iYXNlbGluZXMvbG9jYWwvJHtzdWJmb2xkZXJ9LyoqLyouZGVsZXRlYF0pXHJcbiAgICAgICAgLnBpcGUoZ3VscC5kZXN0KHJlZkJhc2VsaW5lKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJhc2VsaW5lRGVsZXRlKHN1YmZvbGRlciA9IFwiXCIpIHtcclxuICAgIHJldHVybiBndWxwLnNyYyhbXCJ0ZXN0cy9iYXNlbGluZXMvbG9jYWwvKiovKi5kZWxldGVcIl0pXHJcbiAgICAgICAgLnBpcGUoaW5zZXJ0LnRyYW5zZm9ybSgoY29udGVudCwgZmlsZU9iaikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBwYXRoLmpvaW4ocmVmQmFzZWxpbmUsIGZpbGVPYmoucmVsYXRpdmUuc3Vic3RyKDAsIGZpbGVPYmoucmVsYXRpdmUubGVuZ3RoIC0gXCIuZGVsZXRlXCIubGVuZ3RoKSk7XHJcbiAgICAgICAgICAgIGRlbC5zeW5jKHRhcmdldCk7XHJcbiAgICAgICAgICAgIGRlbC5zeW5jKGZpbGVPYmoucGF0aCk7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH0pKTtcclxufVxyXG5cclxuZ3VscC50YXNrKFwiYmFzZWxpbmUtYWNjZXB0LXJ3Y1wiLCBcIk1ha2VzIHRoZSBtb3N0IHJlY2VudCByd2MgdGVzdCByZXN1bHRzIHRoZSBuZXcgYmFzZWxpbmUsIG92ZXJ3cml0aW5nIHRoZSBvbGQgYmFzZWxpbmVcIiwgKCkgPT4ge1xyXG4gICAgcmV0dXJuIGJhc2VsaW5lQWNjZXB0KFwicndjXCIpO1xyXG59KTtcclxuXHJcblxyXG5ndWxwLnRhc2soXCJiYXNlbGluZS1hY2NlcHQtdGVzdDI2MlwiLCBcIk1ha2VzIHRoZSBtb3N0IHJlY2VudCB0ZXN0MjYyIHRlc3QgcmVzdWx0cyB0aGUgbmV3IGJhc2VsaW5lLCBvdmVyd3JpdGluZyB0aGUgb2xkIGJhc2VsaW5lXCIsICgpID0+IHtcclxuICAgIHJldHVybiBiYXNlbGluZUFjY2VwdChcInRlc3QyNjJcIik7XHJcbn0pO1xyXG5cclxuXHJcbi8vIFdlYmhvc3RcclxuY29uc3Qgd2ViaG9zdFBhdGggPSBcInRlc3RzL3dlYmhvc3Qvd2VidHNjLnRzXCI7XHJcbmNvbnN0IHdlYmhvc3RKc1BhdGggPSBcInRlc3RzL3dlYmhvc3Qvd2VidHNjLmpzXCI7XHJcbmd1bHAudGFzayh3ZWJob3N0SnNQYXRoLCBmYWxzZSwgW3NlcnZpY2VzRmlsZV0sICgpID0+IHtcclxuICAgIGNvbnN0IHNldHRpbmdzOiB0c2MuU2V0dGluZ3MgPSBnZXRDb21waWxlclNldHRpbmdzKHtcclxuICAgICAgICBvdXRGaWxlOiB3ZWJob3N0SnNQYXRoXHJcbiAgICB9LCAvKnVzZUJ1aWx0Q29tcGlsZXIqLyB0cnVlKTtcclxuICAgIHJldHVybiBndWxwLnNyYyh3ZWJob3N0UGF0aClcclxuICAgICAgICAucGlwZShuZXdlcih3ZWJob3N0SnNQYXRoKSlcclxuICAgICAgICAucGlwZShzb3VyY2VtYXBzLmluaXQoKSlcclxuICAgICAgICAucGlwZSh0c2Moc2V0dGluZ3MpKVxyXG4gICAgICAgIC5waXBlKHNvdXJjZW1hcHMud3JpdGUoXCIuXCIpKVxyXG4gICAgICAgIC5waXBlKGd1bHAuZGVzdChwYXRoLmRpcm5hbWUod2ViaG9zdEpzUGF0aCkpKTtcclxufSk7XHJcblxyXG5ndWxwLnRhc2soXCJ3ZWJob3N0XCIsIFwiQnVpbGRzIHRoZSB0c2Mgd2ViIGhvc3RcIiwgW3dlYmhvc3RKc1BhdGhdLCAoKSA9PiB7XHJcbiAgICByZXR1cm4gZ3VscC5zcmMocGF0aC5qb2luKGJ1aWx0TG9jYWxEaXJlY3RvcnksIFwibGliLmQudHNcIikpLnBpcGUoZ3VscC5kZXN0KFwidGVzdHMvd2ViaG9zdC9cIikpO1xyXG59KTtcclxuXHJcblxyXG4vLyBQZXJmIGNvbXBpbGVyXHJcbmNvbnN0IHBlcmZ0c2NQYXRoID0gXCJ0ZXN0cy9wZXJmdHNjLnRzXCI7XHJcbmNvbnN0IHBlcmZ0c2NKc1BhdGggPSBcImJ1aWx0L2xvY2FsL3BlcmZ0c2MuanNcIjtcclxuZ3VscC50YXNrKHBlcmZ0c2NKc1BhdGgsIGZhbHNlLCBbc2VydmljZXNGaWxlXSwgKCkgPT4ge1xyXG4gICAgY29uc3Qgc2V0dGluZ3M6IHRzYy5TZXR0aW5ncyA9IGdldENvbXBpbGVyU2V0dGluZ3Moe1xyXG4gICAgICAgIG91dEZpbGU6IHBlcmZ0c2NKc1BhdGhcclxuICAgIH0sIC8qdXNlQnVpbHRDb21waWxlciovIHRydWUpO1xyXG4gICAgcmV0dXJuIGd1bHAuc3JjKHBlcmZ0c2NQYXRoKVxyXG4gICAgICAgIC5waXBlKG5ld2VyKHBlcmZ0c2NKc1BhdGgpKVxyXG4gICAgICAgIC5waXBlKHNvdXJjZW1hcHMuaW5pdCgpKVxyXG4gICAgICAgIC5waXBlKHRzYyhzZXR0aW5ncykpXHJcbiAgICAgICAgLnBpcGUoc291cmNlbWFwcy53cml0ZShcIi5cIikpXHJcbiAgICAgICAgLnBpcGUoZ3VscC5kZXN0KFwiLlwiKSk7XHJcbn0pO1xyXG5cclxuZ3VscC50YXNrKFwicGVyZnRzY1wiLCBcIkJ1aWxkcyBhdWdtZW50ZWQgdmVyc2lvbiBvZiB0aGUgY29tcGlsZXIgZm9yIHBlcmYgdGVzdHNcIiwgW3BlcmZ0c2NKc1BhdGhdKTtcclxuXHJcblxyXG4vLyBJbnN0cnVtZW50ZWQgY29tcGlsZXJcclxuY29uc3QgbG9nZ2VkSU9wYXRoID0gcGF0aC5qb2luKGhhcm5lc3NEaXJlY3RvcnksIFwibG9nZ2VkSU8udHNcIik7XHJcbmNvbnN0IGxvZ2dlZElPSnNQYXRoID0gcGF0aC5qb2luKGJ1aWx0TG9jYWxEaXJlY3RvcnksIFwibG9nZ2VkSU8uanNcIik7XHJcbmd1bHAudGFzayhsb2dnZWRJT0pzUGF0aCwgZmFsc2UsIFtdLCAoZG9uZSkgPT4ge1xyXG4gICAgY29uc3QgdGVtcCA9IHBhdGguam9pbihidWlsdExvY2FsRGlyZWN0b3J5LCBcInRlbXBcIik7XHJcbiAgICBta2RpclAodGVtcCwgKGVycikgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5lcnJvcihlcnIpOyBkb25lKGVycik7IHByb2Nlc3MuZXhpdCgxKTsgfTtcclxuICAgICAgICBleGVjKGhvc3QsIFtMS0dDb21waWxlciwgXCItLXR5cGVzIC0tb3V0ZGlyXCIsIHRlbXAsIGxvZ2dlZElPcGF0aF0sICgpID0+IHtcclxuICAgICAgICAgICAgZnMucmVuYW1lU3luYyhwYXRoLmpvaW4odGVtcCwgXCIvaGFybmVzcy9sb2dnZWRJTy5qc1wiKSwgbG9nZ2VkSU9Kc1BhdGgpO1xyXG4gICAgICAgICAgICBkZWwodGVtcCkudGhlbigoKSA9PiBkb25lKCksIGRvbmUpO1xyXG4gICAgICAgIH0sIGRvbmUpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuY29uc3QgaW5zdHJ1bWVudGVyUGF0aCA9IHBhdGguam9pbihoYXJuZXNzRGlyZWN0b3J5LCBcImluc3RydW1lbnRlci50c1wiKTtcclxuY29uc3QgaW5zdHJ1bWVudGVySnNQYXRoID0gcGF0aC5qb2luKGJ1aWx0TG9jYWxEaXJlY3RvcnksIFwiaW5zdHJ1bWVudGVyLmpzXCIpO1xyXG5ndWxwLnRhc2soaW5zdHJ1bWVudGVySnNQYXRoLCBmYWxzZSwgW3NlcnZpY2VzRmlsZV0sICgpID0+IHtcclxuICAgIGNvbnN0IHNldHRpbmdzOiB0c2MuU2V0dGluZ3MgPSBnZXRDb21waWxlclNldHRpbmdzKHtcclxuICAgICAgICBvdXRGaWxlOiBpbnN0cnVtZW50ZXJKc1BhdGhcclxuICAgIH0sIC8qdXNlQnVpbHRDb21waWxlciovIHRydWUpO1xyXG4gICAgcmV0dXJuIGd1bHAuc3JjKGluc3RydW1lbnRlclBhdGgpXHJcbiAgICAgICAgLnBpcGUobmV3ZXIoaW5zdHJ1bWVudGVySnNQYXRoKSlcclxuICAgICAgICAucGlwZShzb3VyY2VtYXBzLmluaXQoKSlcclxuICAgICAgICAucGlwZSh0c2Moc2V0dGluZ3MpKVxyXG4gICAgICAgIC5waXBlKHNvdXJjZW1hcHMud3JpdGUoXCIuXCIpKVxyXG4gICAgICAgIC5waXBlKGd1bHAuZGVzdChcIi5cIikpO1xyXG59KTtcclxuXHJcbmd1bHAudGFzayhcInRzYy1pbnN0cnVtZW50ZWRcIiwgXCJCdWlsZHMgYW4gaW5zdHJ1bWVudGVkIHRzYy5qc1wiLCBbXCJsb2NhbFwiLCBsb2dnZWRJT0pzUGF0aCwgaW5zdHJ1bWVudGVySnNQYXRoLCBzZXJ2aWNlc0ZpbGVdLCAoZG9uZSkgPT4ge1xyXG4gICAgZXhlYyhob3N0LCBbaW5zdHJ1bWVudGVySnNQYXRoLCBcInJlY29yZFwiLCBcImlvY2FwdHVyZVwiLCBidWlsdExvY2FsQ29tcGlsZXJdLCBkb25lLCBkb25lKTtcclxufSk7XHJcblxyXG5ndWxwLnRhc2soXCJ1cGRhdGUtc3VibGltZVwiLCBcIlVwZGF0ZXMgdGhlIHN1YmxpbWUgcGx1Z2luJ3MgdHNzZXJ2ZXJcIiwgW1wibG9jYWxcIiwgc2VydmVyRmlsZV0sICgpID0+IHtcclxuICAgIHJldHVybiBndWxwLnNyYyhbc2VydmVyRmlsZSwgc2VydmVyRmlsZSArIFwiLm1hcFwiXSkucGlwZShndWxwLmRlc3QoXCIuLi9UeXBlU2NyaXB0LVN1YmxpbWUtUGx1Z2luL3Rzc2VydmVyL1wiKSk7XHJcbn0pO1xyXG5cclxuZ3VscC50YXNrKFwiYnVpbGQtcnVsZXNcIiwgXCJDb21waWxlcyB0c2xpbnQgcnVsZXMgdG8ganNcIiwgKCkgPT4ge1xyXG4gICAgY29uc3Qgc2V0dGluZ3M6IHRzYy5TZXR0aW5ncyA9IGdldENvbXBpbGVyU2V0dGluZ3MoeyBtb2R1bGU6IFwiY29tbW9uanNcIiB9LCAvKnVzZUJ1aWx0Q29tcGlsZXIqLyBmYWxzZSk7XHJcbiAgICBjb25zdCBkZXN0ID0gcGF0aC5qb2luKGJ1aWx0TG9jYWxEaXJlY3RvcnksIFwidHNsaW50XCIpO1xyXG4gICAgcmV0dXJuIGd1bHAuc3JjKFwic2NyaXB0cy90c2xpbnQvKiovKi50c1wiKVxyXG4gICAgICAgIC5waXBlKG5ld2VyKHtcclxuICAgICAgICAgICAgZGVzdCxcclxuICAgICAgICAgICAgZXh0OiBcIi5qc1wiXHJcbiAgICAgICAgfSkpXHJcbiAgICAgICAgLnBpcGUoc291cmNlbWFwcy5pbml0KCkpXHJcbiAgICAgICAgLnBpcGUodHNjKHNldHRpbmdzKSlcclxuICAgICAgICAucGlwZShzb3VyY2VtYXBzLndyaXRlKFwiLlwiKSlcclxuICAgICAgICAucGlwZShndWxwLmRlc3QoZGVzdCkpO1xyXG59KTtcclxuXHJcbmNvbnN0IGxpbnRUYXJnZXRzID0gW1xyXG4gICAgXCJHdWxwZmlsZS50c1wiLFxyXG4gICAgXCJzcmMvY29tcGlsZXIvKiovKi50c1wiLFxyXG4gICAgXCJzcmMvaGFybmVzcy8qKi8qLnRzXCIsXHJcbiAgICBcIiFzcmMvaGFybmVzcy91bml0dGVzdHMvc2VydmljZXMvZm9ybWF0dGluZy8qKi8qLnRzXCIsXHJcbiAgICBcInNyYy9zZXJ2ZXIvKiovKi50c1wiLFxyXG4gICAgXCJzY3JpcHRzL3RzbGludC8qKi8qLnRzXCIsXHJcbiAgICBcInNyYy9zZXJ2aWNlcy8qKi8qLnRzXCIsXHJcbiAgICBcInRlc3RzLyoudHNcIiwgXCJ0ZXN0cy93ZWJob3N0LyoudHNcIiAvLyBOb3RlOiBkb2VzICpub3QqIGRlc2NlbmQgcmVjdXJzaXZlbHlcclxuXTtcclxuXHJcbmZ1bmN0aW9uIHNlbmROZXh0RmlsZShmaWxlczoge3BhdGg6IHN0cmluZ31bXSwgY2hpbGQ6IGNwLkNoaWxkUHJvY2VzcywgY2FsbGJhY2s6IChmYWlsdXJlczogbnVtYmVyKSA9PiB2b2lkLCBmYWlsdXJlczogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBmaWxlID0gZmlsZXMucG9wKCk7XHJcbiAgICBpZiAoZmlsZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBMaW50aW5nICcke2ZpbGUucGF0aH0nLmApO1xyXG4gICAgICAgIGNoaWxkLnNlbmQoeyBraW5kOiBcImZpbGVcIiwgbmFtZTogZmlsZS5wYXRoIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY2hpbGQuc2VuZCh7IGtpbmQ6IFwiY2xvc2VcIiB9KTtcclxuICAgICAgICBjYWxsYmFjayhmYWlsdXJlcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNwYXduTGludFdvcmtlcihmaWxlczoge3BhdGg6IHN0cmluZ31bXSwgY2FsbGJhY2s6IChmYWlsdXJlczogbnVtYmVyKSA9PiB2b2lkKSB7XHJcbiAgICBjb25zdCBjaGlsZCA9IGNwLmZvcmsoXCIuL3NjcmlwdHMvcGFyYWxsZWwtbGludFwiKTtcclxuICAgIGxldCBmYWlsdXJlcyA9IDA7XHJcbiAgICBjaGlsZC5vbihcIm1lc3NhZ2VcIiwgZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIHN3aXRjaCAoZGF0YS5raW5kKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJyZXN1bHRcIjpcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmZhaWx1cmVzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZhaWx1cmVzICs9IGRhdGEuZmFpbHVyZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5vdXRwdXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2VuZE5leHRGaWxlKGZpbGVzLCBjaGlsZCwgY2FsbGJhY2ssIGZhaWx1cmVzKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZXJyb3JcIjpcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZGF0YS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICBmYWlsdXJlcysrO1xyXG4gICAgICAgICAgICAgICAgc2VuZE5leHRGaWxlKGZpbGVzLCBjaGlsZCwgY2FsbGJhY2ssIGZhaWx1cmVzKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgc2VuZE5leHRGaWxlKGZpbGVzLCBjaGlsZCwgY2FsbGJhY2ssIGZhaWx1cmVzKTtcclxufVxyXG5cclxuZ3VscC50YXNrKFwibGludFwiLCBcIlJ1bnMgdHNsaW50IG9uIHRoZSBjb21waWxlciBzb3VyY2VzLiBPcHRpb25hbCBhcmd1bWVudHMgYXJlOiAtLWZbaWxlc109cmVnZXhcIiwgW1wiYnVpbGQtcnVsZXNcIl0sICgpID0+IHtcclxuICAgIGNvbnN0IGZpbGVNYXRjaGVyID0gUmVnRXhwKGNtZExpbmVPcHRpb25zW1wiZmlsZXNcIl0pO1xyXG4gICAgaWYgKGZvbGQuaXNUcmF2aXMoKSkgY29uc29sZS5sb2coZm9sZC5zdGFydChcImxpbnRcIikpO1xyXG5cclxuICAgIGxldCBmaWxlczoge3N0YXQ6IGZzLlN0YXRzLCBwYXRoOiBzdHJpbmd9W10gPSBbXTtcclxuICAgIHJldHVybiBndWxwLnNyYyhsaW50VGFyZ2V0cywgeyByZWFkOiBmYWxzZSB9KVxyXG4gICAgICAgIC5waXBlKHRocm91Z2gyLm9iaigoY2h1bmssIGVuYywgY2IpID0+IHtcclxuICAgICAgICAgICAgZmlsZXMucHVzaChjaHVuayk7XHJcbiAgICAgICAgICAgIGNiKCk7XHJcbiAgICAgICAgfSwgKGNiKSA9PiB7XHJcbiAgICAgICAgICAgIGZpbGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gIGZpbGVNYXRjaGVyLnRlc3QoZmlsZS5wYXRoKSkuc29ydCgoZmlsZWEsIGZpbGViKSA9PiBmaWxlYS5zdGF0LnNpemUgLSBmaWxlYi5zdGF0LnNpemUpO1xyXG4gICAgICAgICAgICBjb25zdCB3b3JrZXJDb3VudCA9IChwcm9jZXNzLmVudi53b3JrZXJDb3VudCAmJiArcHJvY2Vzcy5lbnYud29ya2VyQ291bnQpIHx8IG9zLmNwdXMoKS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29ya2VyQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgc3Bhd25MaW50V29ya2VyKGZpbGVzLCBmaW5pc2hlZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBjb21wbGV0ZWQgPSAwO1xyXG4gICAgICAgICAgICBsZXQgZmFpbHVyZXMgPSAwO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBmaW5pc2hlZChmYWlscykge1xyXG4gICAgICAgICAgICAgICAgY29tcGxldGVkKys7XHJcbiAgICAgICAgICAgICAgICBmYWlsdXJlcyArPSBmYWlscztcclxuICAgICAgICAgICAgICAgIGlmIChjb21wbGV0ZWQgPT09IHdvcmtlckNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvbGQuaXNUcmF2aXMoKSkgY29uc29sZS5sb2coZm9sZC5lbmQoXCJsaW50XCIpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmFpbHVyZXMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTGludGVyIGVycm9yczogJHtmYWlsdXJlc31gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkpO1xyXG59KTtcclxuXHJcblxyXG5ndWxwLnRhc2soXCJkZWZhdWx0XCIsIFwiUnVucyAnbG9jYWwnXCIsIFtcImxvY2FsXCJdKTtcclxuXHJcbmd1bHAudGFzayhcIndhdGNoXCIsIFwiV2F0Y2hlcyB0aGUgc3JjLyBkaXJlY3RvcnkgZm9yIGNoYW5nZXMgYW5kIGV4ZWN1dGVzIHJ1bnRlc3RzLXBhcmFsbGVsLlwiLCBbXSwgKCkgPT4ge1xyXG4gICAgZ3VscC53YXRjaChcInNyYy8qKi8qLipcIiwgW1wicnVudGVzdHMtcGFyYWxsZWxcIl0pO1xyXG59KTtcclxuIl19
